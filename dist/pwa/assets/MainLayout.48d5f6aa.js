import{h as O,c as H,a as _,d as we,u as ft,e as ha,f as dt,g as va,r as I,i as ae,j as Vn,s as gr,k as yr,P as ma,p as It,n as Ge,l as Ue,w as L,o as Ae,m as ve,q as kt,t as Fe,v as Br,x as Ne,y as xt,z as Wn,A as ga,B as Qn,C as ya,D as Jn,E as ba,F as Kn,G as _a,H as Sa,I as At,J as Ca,K as Lr,L as br,M as Ta,T as ka,N as xa,O as Pa,Q as Ra,R as Ea,S as _r,U as Oa,V as Kt,W as Yt,X as de,Y as Da,Z as ar,_ as zr,$ as Gt,a0 as Ma,a1 as pt,a2 as Yn,a3 as Ia,a4 as Sr,a5 as Cr,a6 as Pt,a7 as Aa,a8 as gt,a9 as wa,aa as ke,ab as ja,ac as Ba,ad as La,ae as Xn,af as Zn,ag as ei,ah as ti,ai as yt,aj as at,ak as Fr,al as ri,am as $r,an as We,ao as ee,ap as He,aq as xe,ar as E,as as za,at as C,au as qr,av as ct,aw as ni,ax as ii,ay as Fa,az as $a,aA as qa,aB as Na,aC as wt,aD as ai,aE as Ua,aF as Ha,aG as Ga,aH as Va,aI as Wa,aJ as ce,aK as Nr,aL as Qa,aM as Te,aN as Ja,aO as Ka,aP as Ya,aQ as Xa}from"./index.ad6519c1.js";import{_ as Tr}from"./plugin-vue_export-helper.21dcd24c.js";import{m as Ur,r as Za}from"./media-stream.b93aad8d.js";const eo=O("div",{class:"q-space"});var oi=H({name:"QSpace",setup(){return()=>eo}}),ie=H({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:r}){const t=_(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>O("div",{class:t.value},we(r.default))}}),fe=H({name:"QItem",props:{...ft,...ha,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ae(),i=dt(e,n),{hasLink:a,linkAttrs:c,linkClass:l,linkTag:s,navigateOnClick:o}=va(),u=I(null),f=I(null),d=_(()=>e.clickable===!0||a.value===!0||e.tag==="label"),p=_(()=>e.disable!==!0&&d.value===!0),h=_(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?l.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),v=_(()=>{if(e.insetLevel===void 0)return null;const x=n.lang.rtl===!0?"Right":"Left";return{["padding"+x]:16+e.insetLevel*56+"px"}});function T(x){p.value===!0&&(f.value!==null&&(x.qKeyEvent!==!0&&document.activeElement===u.value?f.value.focus():document.activeElement===f.value&&u.value.focus()),o(x))}function g(x){if(p.value===!0&&Vn(x,13)===!0){gr(x),x.qKeyEvent=!0;const b=new MouseEvent("click",x);b.qKeyEvent=!0,u.value.dispatchEvent(b)}t("keyup",x)}function m(){const x=yr(r.default,[]);return p.value===!0&&x.unshift(O("div",{class:"q-focus-helper",tabindex:-1,ref:f})),x}return()=>{const x={ref:u,class:h.value,style:v.value,role:"listitem",onClick:T,onKeyup:g};return p.value===!0?(x.tabindex=e.tabindex||"0",Object.assign(x,c.value)):d.value===!0&&(x["aria-disabled"]="true"),O(s.value,x,m())}}}),jt=H({name:"QList",props:{...ft,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean},setup(e,{slots:r}){const t=ae(),n=dt(e,t.proxy.$q),i=_(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(n.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>O("div",{class:i.value,role:"list"},we(r.default))}});function si(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),ma.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const to={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function ro({showing:e,avoidEmit:r,configureAnchorEl:t}){const{props:n,proxy:i,emit:a}=ae(),c=I(null);let l;function s(p){return c.value===null?!1:p===void 0||p.touches===void 0||p.touches.length<=1}const o={};t===void 0&&(Object.assign(o,{hide(p){i.hide(p)},toggle(p){i.toggle(p),p.qAnchorHandled=!0},toggleKey(p){Vn(p,13)===!0&&o.toggle(p)},contextClick(p){i.hide(p),It(p),Ge(()=>{i.show(p),p.qAnchorHandled=!0})},prevent:It,mobileTouch(p){if(o.mobileCleanup(p),s(p)!==!0)return;i.hide(p),c.value.classList.add("non-selectable");const h=p.target;Ue(o,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[c.value,"contextmenu","prevent","notPassive"]]),l=setTimeout(()=>{i.show(p),p.qAnchorHandled=!0},300)},mobileCleanup(p){c.value.classList.remove("non-selectable"),clearTimeout(l),e.value===!0&&p!==void 0&&si()}}),t=function(p=n.contextMenu){if(n.noParentEvent===!0||c.value===null)return;let h;p===!0?i.$q.platform.is.mobile===!0?h=[[c.value,"touchstart","mobileTouch","passive"]]:h=[[c.value,"mousedown","hide","passive"],[c.value,"contextmenu","contextClick","notPassive"]]:h=[[c.value,"click","toggle","passive"],[c.value,"keyup","toggleKey","passive"]],Ue(o,"anchor",h)});function u(){kt(o,"anchor")}function f(p){for(c.value=p;c.value.classList.contains("q-anchor--skip");)c.value=c.value.parentNode;t()}function d(){if(n.target===!1||n.target===""||i.$el.parentNode===null)c.value=null;else if(n.target===!0)f(i.$el.parentNode);else{let p=n.target;if(typeof n.target=="string")try{p=document.querySelector(n.target)}catch{p=void 0}p!=null?(c.value=p.$el||p,t()):(c.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return L(()=>n.contextMenu,p=>{c.value!==null&&(u(),t(p))}),L(()=>n.target,()=>{c.value!==null&&u(),d()}),L(()=>n.noParentEvent,p=>{c.value!==null&&(p===!0?u():t())}),Ae(()=>{d(),r!==!0&&n.modelValue===!0&&c.value===null&&a("update:modelValue",!1)}),ve(()=>{clearTimeout(l),u()}),{anchorEl:c,canShow:s,anchorEvents:o}}function no(e,r){const t=I(null);let n;function i(l,s){const o=`${s!==void 0?"add":"remove"}EventListener`,u=s!==void 0?s:n;l!==window&&l[o]("scroll",u,Fe.passive),window[o]("scroll",u,Fe.passive),n=s}function a(){t.value!==null&&(i(t.value),t.value=null)}const c=L(()=>e.noParentEvent,()=>{t.value!==null&&(a(),r())});return ve(c),{localScrollTarget:t,unconfigureScrollTarget:a,changeScrollEvent:i}}let ci;const{notPassiveCapture:Bt}=Fe,ze=[];function Lt(e){clearTimeout(ci);const r=e.target;if(r===void 0||r.nodeType===8||r.classList.contains("no-pointer-events")===!0)return;let t=Br.length-1;for(;t>=0;){const n=Br[t].$;if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;t--}for(let n=ze.length-1;n>=0;n--){const i=ze[n];if((i.anchorEl.value===null||i.anchorEl.value.contains(r)===!1)&&(r===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(r)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function io(e){ze.push(e),ze.length===1&&(document.addEventListener("mousedown",Lt,Bt),document.addEventListener("touchstart",Lt,Bt))}function Hr(e){const r=ze.findIndex(t=>t===e);r>-1&&(ze.splice(r,1),ze.length===0&&(clearTimeout(ci),document.removeEventListener("mousedown",Lt,Bt),document.removeEventListener("touchstart",Lt,Bt)))}let Gr,Vr;function Wr(e){const r=e.split(" ");return r.length!==2?!1:["top","center","bottom"].includes(r[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(r[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function ao(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const or={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{or[`${e}#ltr`]=e,or[`${e}#rtl`]=e});function Qr(e,r){const t=e.split(" ");return{vertical:t[0],horizontal:or[`${t[1]}#${r===!0?"rtl":"ltr"}`]}}function oo(e,r){let{top:t,left:n,right:i,bottom:a,width:c,height:l}=e.getBoundingClientRect();return r!==void 0&&(t-=r[1],n-=r[0],a+=r[1],i+=r[0],c+=r[0],l+=r[1]),{top:t,left:n,right:i,bottom:a,width:c,height:l,middle:n+(i-n)/2,center:t+(a-t)/2}}function so(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function co(e){if(Ne.is.ios===!0&&window.visualViewport!==void 0){const l=document.body.style,{offsetLeft:s,offsetTop:o}=window.visualViewport;s!==Gr&&(l.setProperty("--q-pe-left",s+"px"),Gr=s),o!==Vr&&(l.setProperty("--q-pe-top",o+"px"),Vr=o)}let r;const{scrollLeft:t,scrollTop:n}=e.el;if(e.absoluteOffset===void 0)r=oo(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:l,left:s}=e.anchorEl.getBoundingClientRect(),o=l+e.absoluteOffset.top,u=s+e.absoluteOffset.left;r={top:o,left:u,width:1,height:1,right:u+1,center:o,middle:u,bottom:o+1}}let i={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(i.minWidth=r.width+"px",e.cover===!0&&(i.minHeight=r.height+"px")),Object.assign(e.el.style,i);const a=so(e.el),c={top:r[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:r[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};lo(c,r,a,e.anchorOrigin,e.selfOrigin),i={top:c.top+"px",left:c.left+"px"},c.maxHeight!==void 0&&(i.maxHeight=c.maxHeight+"px",r.height>c.maxHeight&&(i.minHeight=i.maxHeight)),c.maxWidth!==void 0&&(i.maxWidth=c.maxWidth+"px",r.width>c.maxWidth&&(i.minWidth=i.maxWidth)),Object.assign(e.el.style,i),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==t&&(e.el.scrollLeft=t)}function lo(e,r,t,n,i){const a=t.bottom,c=t.right,l=xt(),s=window.innerHeight-l,o=document.body.clientWidth;if(e.top<0||e.top+a>s)if(i.vertical==="center")e.top=r[n.vertical]>s/2?Math.max(0,s-a):0,e.maxHeight=Math.min(a,s);else if(r[n.vertical]>s/2){const u=Math.min(s,n.vertical==="center"?r.center:n.vertical===i.vertical?r.bottom:r.top);e.maxHeight=Math.min(a,u),e.top=Math.max(0,u-a)}else e.top=Math.max(0,n.vertical==="center"?r.center:n.vertical===i.vertical?r.top:r.bottom),e.maxHeight=Math.min(a,s-e.top);if(e.left<0||e.left+c>o)if(e.maxWidth=Math.min(c,o),i.horizontal==="middle")e.left=r[n.horizontal]>o/2?Math.max(0,o-c):0;else if(r[n.horizontal]>o/2){const u=Math.min(o,n.horizontal==="middle"?r.middle:n.horizontal===i.horizontal?r.right:r.left);e.maxWidth=Math.min(c,u),e.left=Math.max(0,u-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?r.middle:n.horizontal===i.horizontal?r.left:r.right),e.maxWidth=Math.min(c,o-e.left)}var kr=H({name:"QMenu",inheritAttrs:!1,props:{...to,...Wn,...ft,...ga,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Wr},self:{type:String,validator:Wr},offset:{type:Array,validator:ao},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Qn,"click","escape-key"],setup(e,{slots:r,emit:t,attrs:n}){let i=null,a,c,l;const s=ae(),{proxy:o}=s,{$q:u}=o,f=I(null),d=I(!1),p=_(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),h=dt(e,u),{registerTick:v,removeTick:T}=ya(),{registerTimeout:g}=Jn(),{transition:m,transitionStyle:x}=ba(e,d),{localScrollTarget:b,changeScrollEvent:y,unconfigureScrollTarget:D}=no(e,me),{anchorEl:R,canShow:z}=ro({showing:d}),{hide:N}=Kn({showing:d,canShow:z,handleShow:pe,handleHide:be,hideOnRouteChange:p,processOnMount:!0}),{showPortal:M,hidePortal:V,renderPortal:oe}=_a(s,f,Je),Y={anchorEl:R,innerRef:f,onClickOutside(A){if(e.persistent!==!0&&d.value===!0)return N(A),(A.type==="touchstart"||A.target.classList.contains("q-dialog__backdrop"))&&gr(A),!0}},G=_(()=>Qr(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),se=_(()=>e.cover===!0?G.value:Qr(e.self||"top start",u.lang.rtl)),k=_(()=>(e.square===!0?" q-menu--square":"")+(h.value===!0?" q-menu--dark q-dark":"")),j=_(()=>e.autoClose===!0?{onClick:ge}:{}),B=_(()=>d.value===!0&&e.persistent!==!0);L(B,A=>{A===!0?(Pa(le),io(Y)):(Lr(le),Hr(Y))});function U(){xa(()=>{let A=f.value;A&&A.contains(document.activeElement)!==!0&&(A=A.querySelector("[autofocus], [data-autofocus]")||A,A.focus({preventScroll:!0}))})}function pe(A){if(i=e.noRefocus===!1?document.activeElement:null,Sa(Ee),M(),me(),a=void 0,A!==void 0&&(e.touchPosition||e.contextMenu)){const Oe=At(A);if(Oe.left!==void 0){const{top:Ke,left:Ye}=R.value.getBoundingClientRect();a={left:Oe.left-Ye,top:Oe.top-Ke}}}c===void 0&&(c=L(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,Se)),e.noFocus!==!0&&document.activeElement.blur(),v(()=>{Se(),e.noFocus!==!0&&U()}),g(()=>{u.platform.is.ios===!0&&(l=e.autoClose,f.value.click()),Se(),M(!0),t("show",A)},e.transitionDuration)}function be(A){T(),V(),_e(!0),i!==null&&(A===void 0||A.qClickOutside!==!0)&&(i.focus(),i=null),g(()=>{V(!0),t("hide",A)},e.transitionDuration)}function _e(A){a=void 0,c!==void 0&&(c(),c=void 0),(A===!0||d.value===!0)&&(Ca(Ee),D(),Hr(Y),Lr(le)),A!==!0&&(i=null)}function me(){(R.value!==null||e.scrollTarget!==void 0)&&(b.value=br(R.value,e.scrollTarget),y(b.value,Se))}function ge(A){l!==!0?(Ta(o,A),t("click",A)):l=!1}function Ee(A){B.value===!0&&e.noFocus!==!0&&Ra(f.value,A.target)!==!0&&U()}function le(A){t("escape-key"),N(A)}function Se(){const A=f.value;A===null||R.value===null||co({el:A,offset:e.offset,anchorEl:R.value,anchorOrigin:G.value,selfOrigin:se.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Je(){return O(ka,{name:m.value,appear:!0},()=>d.value===!0?O("div",{role:"menu",...n,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+k.value,n.class],style:[n.style,x.value],...j.value},we(r.default)):null)}return ve(_e),Object.assign(o,{focus:U,updatePosition:Se}),oe}}),Rt=H({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:r}){const t=_(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>O("div",{class:t.value,role:"toolbar"},we(r.default))}});const xr={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},uo=Object.keys(xr);xr.all=!0;function Jr(e){const r={};for(const t of uo)e[t]===!0&&(r[t]=!0);return Object.keys(r).length===0?xr:(r.horizontal===!0?r.left=r.right=!0:r.left===!0&&r.right===!0&&(r.horizontal=!0),r.vertical===!0?r.up=r.down=!0:r.up===!0&&r.down===!0&&(r.vertical=!0),r.horizontal===!0&&r.vertical===!0&&(r.all=!0),r)}function Kr(e,r){return r.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof r.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(r.uid)===-1)}function Xt(e,r,t){const n=At(e);let i,a=n.left-r.event.x,c=n.top-r.event.y,l=Math.abs(a),s=Math.abs(c);const o=r.direction;o.horizontal===!0&&o.vertical!==!0?i=a<0?"left":"right":o.horizontal!==!0&&o.vertical===!0?i=c<0?"up":"down":o.up===!0&&c<0?(i="up",l>s&&(o.left===!0&&a<0?i="left":o.right===!0&&a>0&&(i="right"))):o.down===!0&&c>0?(i="down",l>s&&(o.left===!0&&a<0?i="left":o.right===!0&&a>0&&(i="right"))):o.left===!0&&a<0?(i="left",l<s&&(o.up===!0&&c<0?i="up":o.down===!0&&c>0&&(i="down"))):o.right===!0&&a>0&&(i="right",l<s&&(o.up===!0&&c<0?i="up":o.down===!0&&c>0&&(i="down")));let u=!1;if(i===void 0&&t===!1){if(r.event.isFirst===!0||r.event.lastDir===void 0)return{};i=r.event.lastDir,u=!0,i==="left"||i==="right"?(n.left-=a,l=0,a=0):(n.top-=c,s=0,c=0)}return{synthetic:u,payload:{evt:e,touch:r.event.mouse!==!0,mouse:r.event.mouse===!0,position:n,direction:i,isFirst:r.event.isFirst,isFinal:t===!0,duration:Date.now()-r.event.time,distance:{x:l,y:s},offset:{x:a,y:c},delta:{x:n.left-r.event.lastX,y:n.top-r.event.lastY}}}}let fo=0;var ot=Ea({name:"touch-pan",beforeMount(e,{value:r,modifiers:t}){if(t.mouse!==!0&&Ne.has.touch!==!0)return;function n(a,c){t.mouse===!0&&c===!0?gr(a):(t.stop===!0&&Yt(a),t.prevent===!0&&It(a))}const i={uid:"qvtp_"+fo++,handler:r,modifiers:t,direction:Jr(t),noop:_r,mouseStart(a){Kr(a,i)&&Oa(a)&&(Ue(i,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),i.start(a,!0))},touchStart(a){if(Kr(a,i)){const c=a.target;Ue(i,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),i.start(a)}},start(a,c){if(Ne.is.firefox===!0&&Kt(e,!0),i.lastEvt=a,c===!0||t.stop===!0){if(i.direction.all!==!0&&(c!==!0||i.modifiers.mouseAllDir!==!0&&i.modifiers.mousealldir!==!0)){const o=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&It(o),a.cancelBubble===!0&&Yt(o),Object.assign(o,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[i.uid]:a.qClonedBy.concat(i.uid)}),i.initialEvent={target:a.target,event:o}}Yt(a)}const{left:l,top:s}=At(a);i.event={x:l,y:s,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:s}},move(a){if(i.event===void 0)return;const c=At(a),l=c.left-i.event.x,s=c.top-i.event.y;if(l===0&&s===0)return;i.lastEvt=a;const o=i.event.mouse===!0,u=()=>{n(a,o);let p;t.preserveCursor!==!0&&t.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),o===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),si(),i.styleCleanup=h=>{if(i.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),o===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{v(),h()},50):v()}else h!==void 0&&h()}};if(i.event.detected===!0){i.event.isFirst!==!0&&n(a,i.event.mouse);const{payload:p,synthetic:h}=Xt(a,i,!1);p!==void 0&&(i.handler(p)===!1?i.end(a):(i.styleCleanup===void 0&&i.event.isFirst===!0&&u(),i.event.lastX=p.position.left,i.event.lastY=p.position.top,i.event.lastDir=h===!0?void 0:p.direction,i.event.isFirst=!1));return}if(i.direction.all===!0||o===!0&&(i.modifiers.mouseAllDir===!0||i.modifiers.mousealldir===!0)){u(),i.event.detected=!0,i.move(a);return}const f=Math.abs(l),d=Math.abs(s);f!==d&&(i.direction.horizontal===!0&&f>d||i.direction.vertical===!0&&f<d||i.direction.up===!0&&f<d&&s<0||i.direction.down===!0&&f<d&&s>0||i.direction.left===!0&&f>d&&l<0||i.direction.right===!0&&f>d&&l>0?(i.event.detected=!0,i.move(a)):i.end(a,!0))},end(a,c){if(i.event!==void 0){if(kt(i,"temp"),Ne.is.firefox===!0&&Kt(e,!1),c===!0)i.styleCleanup!==void 0&&i.styleCleanup(),i.event.detected!==!0&&i.initialEvent!==void 0&&i.initialEvent.target.dispatchEvent(i.initialEvent.event);else if(i.event.detected===!0){i.event.isFirst===!0&&i.handler(Xt(a===void 0?i.lastEvt:a,i).payload);const{payload:l}=Xt(a===void 0?i.lastEvt:a,i,!0),s=()=>{i.handler(l)};i.styleCleanup!==void 0?i.styleCleanup(s):s()}i.event=void 0,i.initialEvent=void 0,i.lastEvt=void 0}}};if(e.__qtouchpan=i,t.mouse===!0){const a=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";Ue(i,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}Ne.has.touch===!0&&Ue(i,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,r){const t=e.__qtouchpan;t!==void 0&&(r.oldValue!==r.value&&(typeof value!="function"&&t.end(),t.handler=r.value),t.direction=Jr(r.modifiers))},beforeUnmount(e){const r=e.__qtouchpan;r!==void 0&&(r.event!==void 0&&r.end(),kt(r,"main"),kt(r,"temp"),Ne.is.firefox===!0&&Kt(e,!1),r.styleCleanup!==void 0&&r.styleCleanup(),delete e.__qtouchpan)}});function Ie(e,r,t){return t<=r?r:Math.min(t,Math.max(r,e))}const Yr=150;var po=H({name:"QDrawer",inheritAttrs:!1,props:{...Wn,...ft,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Qn,"on-layout","mini-state"],setup(e,{slots:r,emit:t,attrs:n}){const i=ae(),{proxy:{$q:a}}=i,c=dt(e,a),{preventBodyScroll:l}=Ma(),{registerTimeout:s,removeTimeout:o}=Jn(),u=Gt(pt,de);if(u===de)return console.error("QDrawer needs to be child of QLayout"),de;let f,d,p;const h=I(e.behavior==="mobile"||e.behavior!=="desktop"&&u.totalWidth.value<=e.breakpoint),v=_(()=>e.mini===!0&&h.value!==!0),T=_(()=>v.value===!0?e.miniWidth:e.width),g=I(e.showIfAbove===!0&&h.value===!1?!0:e.modelValue===!0),m=_(()=>e.persistent!==!0&&(h.value===!0||pe.value===!0));function x(S,F){if(R(),S!==!1&&u.animate(),ue(0),h.value===!0){const re=u.instances[k.value];re!==void 0&&re.belowBreakpoint===!0&&re.hide(!1),De(1),u.isContainer.value!==!0&&l(!0)}else De(0),S!==!1&&Wt(!1);s(()=>{S!==!1&&Wt(!0),F!==!0&&t("show",S)},Yr)}function b(S,F){z(),S!==!1&&u.animate(),De(0),ue(V.value*T.value),Qt(),F!==!0?s(()=>{t("hide",S)},Yr):o()}const{show:y,hide:D}=Kn({showing:g,hideOnRouteChange:m,handleShow:x,handleHide:b}),{addToHistory:R,removeFromHistory:z}=Da(g,D,m),N={belowBreakpoint:h,hide:D},M=_(()=>e.side==="right"),V=_(()=>(a.lang.rtl===!0?-1:1)*(M.value===!0?1:-1)),oe=I(0),Y=I(!1),G=I(!1),se=I(T.value*V.value),k=_(()=>M.value===!0?"left":"right"),j=_(()=>g.value===!0&&h.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:T.value:0),B=_(()=>e.overlay===!0||e.miniToOverlay===!0||u.view.value.indexOf(M.value?"R":"L")>-1||a.platform.is.ios===!0&&u.isContainer.value===!0),U=_(()=>e.overlay===!1&&g.value===!0&&h.value===!1),pe=_(()=>e.overlay===!0&&g.value===!0&&h.value===!1),be=_(()=>"fullscreen q-drawer__backdrop"+(g.value===!1&&Y.value===!1?" hidden":"")),_e=_(()=>({backgroundColor:`rgba(0,0,0,${oe.value*.4})`})),me=_(()=>M.value===!0?u.rows.value.top[2]==="r":u.rows.value.top[0]==="l"),ge=_(()=>M.value===!0?u.rows.value.bottom[2]==="r":u.rows.value.bottom[0]==="l"),Ee=_(()=>{const S={};return u.header.space===!0&&me.value===!1&&(B.value===!0?S.top=`${u.header.offset}px`:u.header.space===!0&&(S.top=`${u.header.size}px`)),u.footer.space===!0&&ge.value===!1&&(B.value===!0?S.bottom=`${u.footer.offset}px`:u.footer.space===!0&&(S.bottom=`${u.footer.size}px`)),S}),le=_(()=>{const S={width:`${T.value}px`,transform:`translateX(${se.value}px)`};return h.value===!0?S:Object.assign(S,Ee.value)}),Se=_(()=>"q-drawer__content fit "+(u.isContainer.value!==!0?"scroll":"overflow-auto")),Je=_(()=>`q-drawer q-drawer--${e.side}`+(G.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(c.value===!0?" q-drawer--dark q-dark":"")+(Y.value===!0?" no-transition":g.value===!0?"":" q-layout--prevent-focus")+(h.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${v.value===!0?"mini":"standard"}`+(B.value===!0||U.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(me.value===!0?" q-drawer--top-padding":""))),A=_(()=>{const S=a.lang.rtl===!0?e.side:k.value;return[[ot,da,void 0,{[S]:!0,mouse:!0}]]}),Oe=_(()=>{const S=a.lang.rtl===!0?k.value:e.side;return[[ot,jr,void 0,{[S]:!0,mouse:!0}]]}),Ke=_(()=>{const S=a.lang.rtl===!0?k.value:e.side;return[[ot,jr,void 0,{[S]:!0,mouse:!0,mouseAllDir:!0}]]});function Ye(){pa(h,e.behavior==="mobile"||e.behavior!=="desktop"&&u.totalWidth.value<=e.breakpoint)}L(h,S=>{S===!0?(f=g.value,g.value===!0&&D(!1)):e.overlay===!1&&e.behavior!=="mobile"&&f!==!1&&(g.value===!0?(ue(0),De(0),Qt()):y(!1))}),L(()=>e.side,(S,F)=>{u.instances[F]===N&&(u.instances[F]=void 0,u[F].space=!1,u[F].offset=0),u.instances[S]=N,u[S].size=T.value,u[S].space=U.value,u[S].offset=j.value}),L(u.totalWidth,()=>{(u.isContainer.value===!0||document.qScrollPrevented!==!0)&&Ye()}),L(()=>e.behavior+e.breakpoint,Ye),L(u.isContainer,S=>{g.value===!0&&l(S!==!0),S===!0&&Ye()}),L(u.scrollbarWidth,()=>{ue(g.value===!0?0:void 0)}),L(j,S=>{Me("offset",S)}),L(U,S=>{t("on-layout",S),Me("space",S)}),L(M,()=>{ue()}),L(T,S=>{ue(),Jt(e.miniToOverlay,S)}),L(()=>e.miniToOverlay,S=>{Jt(S,T.value)}),L(()=>a.lang.rtl,()=>{ue()}),L(()=>e.mini,()=>{e.modelValue===!0&&(fa(),u.animate())}),L(v,S=>{t("mini-state",S)});function ue(S){S===void 0?Ge(()=>{S=g.value===!0?0:T.value,ue(V.value*S)}):(u.isContainer.value===!0&&M.value===!0&&(h.value===!0||Math.abs(S)===T.value)&&(S+=V.value*u.scrollbarWidth.value),se.value=S)}function De(S){oe.value=S}function Wt(S){const F=S===!0?"remove":u.isContainer.value!==!0?"add":"";F!==""&&document.body.classList[F]("q-body--drawer-toggle")}function fa(){clearTimeout(d),i.proxy&&i.proxy.$el&&i.proxy.$el.classList.add("q-drawer--mini-animate"),G.value=!0,d=setTimeout(()=>{G.value=!1,i&&i.proxy&&i.proxy.$el&&i.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function da(S){if(g.value!==!1)return;const F=T.value,re=Ie(S.distance.x,0,F);if(S.isFinal===!0){re>=Math.min(75,F)===!0?y():(u.animate(),De(0),ue(V.value*F)),Y.value=!1;return}ue((a.lang.rtl===!0?M.value!==!0:M.value)?Math.max(F-re,0):Math.min(0,re-F)),De(Ie(re/F,0,1)),S.isFirst===!0&&(Y.value=!0)}function jr(S){if(g.value!==!0)return;const F=T.value,re=S.direction===e.side,mt=(a.lang.rtl===!0?re!==!0:re)?Ie(S.distance.x,0,F):0;if(S.isFinal===!0){Math.abs(mt)<Math.min(75,F)===!0?(u.animate(),De(1),ue(0)):D(),Y.value=!1;return}ue(V.value*mt),De(Ie(1-mt/F,0,1)),S.isFirst===!0&&(Y.value=!0)}function Qt(){l(!1),Wt(!0)}function Me(S,F){u.update(e.side,S,F)}function pa(S,F){S.value!==F&&(S.value=F)}function Jt(S,F){Me("size",S===!0?e.miniWidth:F)}return u.instances[e.side]=N,Jt(e.miniToOverlay,T.value),Me("space",U.value),Me("offset",j.value),e.showIfAbove===!0&&e.modelValue!==!0&&g.value===!0&&e["onUpdate:modelValue"]!==void 0&&t("update:modelValue",!0),Ae(()=>{t("on-layout",U.value),t("mini-state",v.value),f=e.showIfAbove===!0;const S=()=>{(g.value===!0?x:b)(!1,!0)};if(u.totalWidth.value!==0){Ge(S);return}p=L(u.totalWidth,()=>{p(),p=void 0,g.value===!1&&e.showIfAbove===!0&&h.value===!1?y(!1):S()})}),ve(()=>{p!==void 0&&p(),clearTimeout(d),g.value===!0&&Qt(),u.instances[e.side]===N&&(u.instances[e.side]=void 0,Me("size",0),Me("offset",0),Me("space",!1))}),()=>{const S=[];h.value===!0&&(e.noSwipeOpen===!1&&S.push(ar(O("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),A.value)),S.push(zr("div",{ref:"backdrop",class:be.value,style:_e.value,"aria-hidden":"true",onClick:D},void 0,"backdrop",e.noSwipeBackdrop!==!0&&g.value===!0,()=>Ke.value)));const F=v.value===!0&&r.mini!==void 0,re=[O("div",{...n,key:""+F,class:[Se.value,n.class]},F===!0?r.mini():we(r.default))];return e.elevated===!0&&g.value===!0&&re.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S.push(zr("aside",{ref:"content",class:Je.value,style:le.value},re,"contentclose",e.noSwipeClose!==!0&&h.value===!0,()=>Oe.value)),O("div",{class:"q-drawer-container"},S)}}}),ho=H({name:"QPageContainer",setup(e,{slots:r}){const{proxy:{$q:t}}=ae(),n=Gt(pt,de);if(n===de)return console.error("QPageContainer needs to be child of QLayout"),de;Yn(Ia,!0);const i=_(()=>{const a={};return n.header.space===!0&&(a.paddingTop=`${n.header.size}px`),n.right.space===!0&&(a[`padding${t.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(a.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(a[`padding${t.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),a});return()=>O("div",{class:"q-page-container",style:i.value},we(r.default))}});function vo(){const e=I(!Sr.value);return e.value===!1&&Ae(()=>{e.value=!0}),e}const li=typeof ResizeObserver<"u",Xr=li===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var Ve=H({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:r}){let t=null,n,i={width:-1,height:-1};function a(s){s===!0||e.debounce===0||e.debounce==="0"?c():t===null&&(t=setTimeout(c,e.debounce))}function c(){if(clearTimeout(t),t=null,n){const{offsetWidth:s,offsetHeight:o}=n;(s!==i.width||o!==i.height)&&(i={width:s,height:o},r("resize",i))}}const{proxy:l}=ae();if(li===!0){let s;const o=u=>{n=l.$el.parentNode,n?(s=new ResizeObserver(a),s.observe(n),c()):u!==!0&&Ge(()=>{o(!0)})};return Ae(()=>{o()}),ve(()=>{clearTimeout(t),s!==void 0&&(s.disconnect!==void 0?s.disconnect():n&&s.unobserve(n))}),_r}else{let u=function(){clearTimeout(t),o!==void 0&&(o.removeEventListener!==void 0&&o.removeEventListener("resize",a,Fe.passive),o=void 0)},f=function(){u(),n&&n.contentDocument&&(o=n.contentDocument.defaultView,o.addEventListener("resize",a,Fe.passive),c())};const s=vo();let o;return Ae(()=>{Ge(()=>{n=l.$el,n&&f()})}),ve(u),l.trigger=a,()=>{if(s.value===!0)return O("object",{style:Xr.style,tabindex:-1,type:"text/html",data:Xr.url,"aria-hidden":"true",onLoad:f})}}}}),mo=H({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ae(),i=Gt(pt,de);if(i===de)return console.error("QFooter needs to be child of QLayout"),de;const a=I(parseInt(e.heightHint,10)),c=I(!0),l=I(Sr.value===!0||i.isContainer.value===!0?0:window.innerHeight),s=_(()=>e.reveal===!0||i.view.value.indexOf("F")>-1||n.platform.is.ios&&i.isContainer.value===!0),o=_(()=>i.isContainer.value===!0?i.containerHeight.value:l.value),u=_(()=>{if(e.modelValue!==!0)return 0;if(s.value===!0)return c.value===!0?a.value:0;const y=i.scroll.value.position+o.value+a.value-i.height.value;return y>0?y:0}),f=_(()=>e.modelValue!==!0||s.value===!0&&c.value!==!0),d=_(()=>e.modelValue===!0&&f.value===!0&&e.reveal===!0),p=_(()=>"q-footer q-layout__section--marginal "+(s.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(f.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(s.value!==!0?" hidden":""):"")),h=_(()=>{const y=i.rows.value.bottom,D={};return y[0]==="l"&&i.left.space===!0&&(D[n.lang.rtl===!0?"right":"left"]=`${i.left.size}px`),y[2]==="r"&&i.right.space===!0&&(D[n.lang.rtl===!0?"left":"right"]=`${i.right.size}px`),D});function v(y,D){i.update("footer",y,D)}function T(y,D){y.value!==D&&(y.value=D)}function g({height:y}){T(a,y),v("size",y)}function m(){if(e.reveal!==!0)return;const{direction:y,position:D,inflectionPoint:R}=i.scroll.value;T(c,y==="up"||D-R<100||i.height.value-o.value-D-a.value<300)}function x(y){d.value===!0&&T(c,!0),t("focusin",y)}L(()=>e.modelValue,y=>{v("space",y),T(c,!0),i.animate()}),L(u,y=>{v("offset",y)}),L(()=>e.reveal,y=>{y===!1&&T(c,e.modelValue)}),L(c,y=>{i.animate(),t("reveal",y)}),L([a,i.scroll,i.height],m),L(()=>n.screen.height,y=>{i.isContainer.value!==!0&&T(l,y)});const b={};return i.instances.footer=b,e.modelValue===!0&&v("size",a.value),v("space",e.modelValue),v("offset",u.value),ve(()=>{i.instances.footer===b&&(i.instances.footer=void 0,v("size",0),v("offset",0),v("space",!1))}),()=>{const y=Cr(r.default,[O(Ve,{debounce:0,onResize:g})]);return e.elevated===!0&&y.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),O("footer",{class:p.value,style:h.value,onFocusin:x},y)}}});const{passive:Zr}=Fe,go=["both","horizontal","vertical"];var ui=H({name:"QScrollObserver",props:{axis:{type:String,validator:e=>go.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:r}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,i,a;L(()=>e.scrollTarget,()=>{s(),l()});function c(){n!==null&&n();const f=Math.max(0,Pt(i)),d=Aa(i),p={top:f-t.position.top,left:d-t.position.left};if(e.axis==="vertical"&&p.top===0||e.axis==="horizontal"&&p.left===0)return;const h=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";t.position={top:f,left:d},t.directionChanged=t.direction!==h,t.delta=p,t.directionChanged===!0&&(t.direction=h,t.inflectionPoint=t.position),r("scroll",{...t})}function l(){i=br(a,e.scrollTarget),i.addEventListener("scroll",o,Zr),o(!0)}function s(){i!==void 0&&(i.removeEventListener("scroll",o,Zr),i=void 0)}function o(f){if(f===!0||e.debounce===0||e.debounce==="0")c();else if(n===null){const[d,p]=e.debounce?[setTimeout(c,e.debounce),clearTimeout]:[requestAnimationFrame(c),cancelAnimationFrame];n=()=>{p(d),n=null}}}const{proxy:u}=ae();return Ae(()=>{a=u.$el.parentNode,l()}),ve(()=>{n!==null&&n(),s()}),Object.assign(u,{trigger:o,getPosition:()=>t}),_r}}),yo=H({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ae(),i=I(null),a=I(n.screen.height),c=I(e.container===!0?0:n.screen.width),l=I({position:0,direction:"down",inflectionPoint:0}),s=I(0),o=I(Sr.value===!0?0:xt()),u=_(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),f=_(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),d=_(()=>o.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${o.value}px`}:null),p=_(()=>o.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${o.value}px`,width:`calc(100% + ${o.value}px)`}:null);function h(b){if(e.container===!0||document.qScrollPrevented!==!0){const y={position:b.position.top,direction:b.direction,directionChanged:b.directionChanged,inflectionPoint:b.inflectionPoint.top,delta:b.delta.top};l.value=y,e.onScroll!==void 0&&t("scroll",y)}}function v(b){const{height:y,width:D}=b;let R=!1;a.value!==y&&(R=!0,a.value=y,e.onScrollHeight!==void 0&&t("scroll-height",y),g()),c.value!==D&&(R=!0,c.value=D),R===!0&&e.onResize!==void 0&&t("resize",b)}function T({height:b}){s.value!==b&&(s.value=b,g())}function g(){if(e.container===!0){const b=a.value>s.value?xt():0;o.value!==b&&(o.value=b)}}let m;const x={instances:{},view:_(()=>e.view),isContainer:_(()=>e.container),rootRef:i,height:a,containerHeight:s,scrollbarWidth:o,totalWidth:_(()=>c.value+o.value),rows:_(()=>{const b=e.view.toLowerCase().split(" ");return{top:b[0].split(""),middle:b[1].split(""),bottom:b[2].split("")}}),header:gt({size:0,offset:0,space:!1}),right:gt({size:300,offset:0,space:!1}),footer:gt({size:0,offset:0,space:!1}),left:gt({size:300,offset:0,space:!1}),scroll:l,animate(){m!==void 0?clearTimeout(m):document.body.classList.add("q-body--layout-animate"),m=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),m=void 0},155)},update(b,y,D){x[b][y]=D}};if(Yn(pt,x),xt()>0){let D=function(){b=null,y.classList.remove("hide-scrollbar")},R=function(){if(b===null){if(y.scrollHeight>n.screen.height)return;y.classList.add("hide-scrollbar")}else clearTimeout(b);b=setTimeout(D,300)},z=function(N){b!==null&&N==="remove"&&(clearTimeout(b),D()),window[`${N}EventListener`]("resize",R)},b=null;const y=document.body;L(()=>e.container!==!0?"add":"remove",z),e.container!==!0&&z("add"),wa(()=>{z("remove")})}return()=>{const b=Cr(r.default,[O(ui,{onScroll:h}),O(Ve,{onResize:v})]),y=O("div",{class:u.value,style:f.value,ref:e.container===!0?void 0:i,tabindex:-1},b);return e.container===!0?O("div",{class:"q-layout-container overflow-hidden",ref:i},[O(Ve,{onResize:T}),O("div",{class:"absolute-full",style:d.value},[O("div",{class:"scroll",style:p.value},[y])])]):y}}}),en;const ht=typeof window<"u",bo=e=>typeof e=="function",_o=e=>typeof e=="string",Zt=()=>{};ht&&((en=window==null?void 0:window.navigator)==null?void 0:en.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function zt(e){return typeof e=="function"?e():ke(e)}function fi(e,r){function t(...n){e(()=>r.apply(this,n),{fn:r,thisArg:this,args:n})}return t}const di=e=>e();function So(e,r={}){let t,n;return a=>{const c=zt(e),l=zt(r.maxWait);if(t&&clearTimeout(t),c<=0||l!==void 0&&l<=0)return n&&(clearTimeout(n),n=null),a();l&&!n&&(n=setTimeout(()=>{t&&clearTimeout(t),n=null,a()},l)),t=setTimeout(()=>{n&&clearTimeout(n),n=null,a()},c)}}function Co(e=di){const r=I(!0);function t(){r.value=!1}function n(){r.value=!0}return{isActive:r,pause:t,resume:n,eventFilter:(...a)=>{r.value&&e(...a)}}}function To(e){return e}function ko(e){return ja()?(Ba(e),!0):!1}function xo(e,r=200,t={}){return fi(So(r,t),e)}function Po(e,r=200,t={}){if(r<=0)return e;const n=I(e.value),i=xo(()=>{n.value=e.value},r,t);return L(e,()=>i()),n}var tn=Object.getOwnPropertySymbols,Ro=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,Oo=(e,r)=>{var t={};for(var n in e)Ro.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&tn)for(var n of tn(e))r.indexOf(n)<0&&Eo.call(e,n)&&(t[n]=e[n]);return t};function Do(e,r,t={}){const n=t,{eventFilter:i=di}=n,a=Oo(n,["eventFilter"]);return L(e,fi(i,r),a)}var Mo=Object.defineProperty,Io=Object.defineProperties,Ao=Object.getOwnPropertyDescriptors,Ft=Object.getOwnPropertySymbols,pi=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable,rn=(e,r,t)=>r in e?Mo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,wo=(e,r)=>{for(var t in r||(r={}))pi.call(r,t)&&rn(e,t,r[t]);if(Ft)for(var t of Ft(r))hi.call(r,t)&&rn(e,t,r[t]);return e},jo=(e,r)=>Io(e,Ao(r)),Bo=(e,r)=>{var t={};for(var n in e)pi.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&Ft)for(var n of Ft(e))r.indexOf(n)<0&&hi.call(e,n)&&(t[n]=e[n]);return t};function Lo(e,r,t={}){const n=t,{eventFilter:i}=n,a=Bo(n,["eventFilter"]),{eventFilter:c,pause:l,resume:s,isActive:o}=Co(i);return{stop:Do(e,r,jo(wo({},a),{eventFilter:c})),pause:l,resume:s,isActive:o}}function zo(e){var r;const t=zt(e);return(r=t==null?void 0:t.$el)!=null?r:t}const $t=ht?window:void 0;ht&&window.document;ht&&window.navigator;ht&&window.location;function Fo(...e){let r,t,n,i;if(_o(e[0])?([t,n,i]=e,r=$t):[r,t,n,i]=e,!r)return Zt;let a=Zt;const c=L(()=>zo(r),s=>{a(),s&&(s.addEventListener(t,n,i),a=()=>{s.removeEventListener(t,n,i),a=Zt})},{immediate:!0,flush:"post"}),l=()=>{c(),a()};return ko(l),l}const sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cr="__vueuse_ssr_handlers__";sr[cr]=sr[cr]||{};const $o=sr[cr];function qo(e,r){return $o[e]||r}function No(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"||Array.isArray(e)?"object":Number.isNaN(e)?"any":"number"}var Uo=Object.defineProperty,nn=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,an=(e,r,t)=>r in e?Uo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,on=(e,r)=>{for(var t in r||(r={}))Ho.call(r,t)&&an(e,t,r[t]);if(nn)for(var t of nn(r))Go.call(r,t)&&an(e,t,r[t]);return e};const Vo={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function Wo(e,r,t,n={}){var i;const{flush:a="pre",deep:c=!0,listenToStorageChanges:l=!0,writeDefaults:s=!0,mergeDefaults:o=!1,shallow:u,window:f=$t,eventFilter:d,onError:p=R=>{console.error(R)}}=n,h=(u?La:I)(r);if(!t)try{t=qo("getDefaultStorage",()=>{var R;return(R=$t)==null?void 0:R.localStorage})()}catch(R){p(R)}if(!t)return h;const v=zt(r),T=No(v),g=(i=n.serializer)!=null?i:Vo[T],{pause:m,resume:x}=Lo(h,()=>b(h.value),{flush:a,deep:c,eventFilter:d});return f&&l&&Fo(f,"storage",D),D(),h;function b(R){try{R==null?t.removeItem(e):t.setItem(e,g.write(R))}catch(z){p(z)}}function y(R){m();try{const z=R?R.newValue:t.getItem(e);if(z==null)return s&&v!==null&&t.setItem(e,g.write(v)),v;if(!R&&o){const N=g.read(z);return bo(o)?o(N,v):T==="object"&&!Array.isArray(N)?on(on({},v),N):N}else return typeof z!="string"?z:g.read(z)}catch(z){p(z)}finally{x()}}function D(R){if(!(R&&R.storageArea!==t)){if(R&&R.key===null){h.value=v;return}R&&R.key!==e||(h.value=y(R))}}}function vi(e,r,t={}){const{window:n=$t}=t;return Wo(e,r,n==null?void 0:n.localStorage,t)}var sn;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(sn||(sn={}));var Qo=Object.defineProperty,cn=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,Ko=Object.prototype.propertyIsEnumerable,ln=(e,r,t)=>r in e?Qo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Yo=(e,r)=>{for(var t in r||(r={}))Jo.call(r,t)&&ln(e,t,r[t]);if(cn)for(var t of cn(r))Ko.call(r,t)&&ln(e,t,r[t]);return e};const Xo={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Yo({linear:To},Xo);var Pr={exports:{}};(function(e){var r={};r.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),r.useArrayBufferView=!r.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=r;var t=e.exports.BlobBuilder;typeof window<"u"&&(t=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function n(){this._pieces=[],this._parts=[]}n.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},n.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);r.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},n.prototype.getBuffer=function(){if(this.flush(),r.useBlobBuilder){for(var i=new t,a=0,c=this._parts.length;a<c;a++)i.append(this._parts[a]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=n})(Pr);var Zo=Pr.exports.BufferBuilder,un=Pr.exports.binaryFeatures,es={unpack:function(e){var r=new J(e);return r.unpack()},pack:function(e){var r=new K;r.pack(e);var t=r.getBuffer();return t}},fn=es;function J(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}J.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}};J.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};J.prototype.unpack_uint16=function(){var e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r};J.prototype.unpack_uint32=function(){var e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r};J.prototype.unpack_uint64=function(){var e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r};J.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-(1<<8)};J.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-(1<<16)};J.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};J.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};J.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r};J.prototype.unpack_string=function(e){for(var r=this.read(e),t=0,n="",i,a;t<e;)i=r[t],i<128?(n+=String.fromCharCode(i),t++):(i^192)<32?(a=(i^192)<<6|r[t+1]&63,n+=String.fromCharCode(a),t+=2):(a=(i&15)<<12|(r[t+1]&63)<<6|r[t+2]&63,n+=String.fromCharCode(a),t+=3);return this.index+=e,n};J.prototype.unpack_array=function(e){for(var r=new Array(e),t=0;t<e;t++)r[t]=this.unpack();return r};J.prototype.unpack_map=function(e){for(var r={},t=0;t<e;t++){var n=this.unpack(),i=this.unpack();r[n]=i}return r};J.prototype.unpack_float=function(){var e=this.unpack_uint32(),r=e>>31,t=(e>>23&255)-127,n=e&8388607|8388608;return(r===0?1:-1)*n*Math.pow(2,t-23)};J.prototype.unpack_double=function(){var e=this.unpack_uint32(),r=this.unpack_uint32(),t=e>>31,n=(e>>20&2047)-1023,i=e&1048575|1048576,a=i*Math.pow(2,n-20)+r*Math.pow(2,n-52);return(t===0?1:-1)*a};J.prototype.read=function(e){var r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")};function K(){this.bufferBuilder=new Zo}K.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};K.prototype.pack=function(e){var r=typeof e;if(r==="string")this.pack_string(e);else if(r==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(r==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(r==="undefined")this.bufferBuilder.append(192);else if(r==="object")if(e===null)this.bufferBuilder.append(192);else{var t=e.constructor;if(t==Array)this.pack_array(e);else if(t==Blob||t==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(t==ArrayBuffer)un.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)un.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(t==Object||t.toString().startsWith("class"))this.pack_object(e);else if(t==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+t.toString()+'" not yet supported')}else throw new Error('Type "'+r+'" not yet supported');this.bufferBuilder.flush()};K.prototype.pack_bin=function(e){var r=e.length||e.byteLength||e.size;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this.bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this.bufferBuilder.append(e)};K.prototype.pack_string=function(e){var r=rs(e);if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this.bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this.bufferBuilder.append(e)};K.prototype.pack_array=function(e){var r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this.bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");for(var t=0;t<r;t++)this.pack(e[t])};K.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};K.prototype.pack_double=function(e){var r=0;e<0&&(r=1,e=-e);var t=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,t)-1,i=Math.floor(n*Math.pow(2,52)),a=Math.pow(2,32),c=r<<31|t+1023<<20|i/a&1048575,l=i%a;this.bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(l)};K.prototype.pack_object=function(e){var r=Object.keys(e),t=r.length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(t);else throw new Error("Invalid length");for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))};K.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};K.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};K.prototype.pack_uint32=function(e){var r=e&4294967295;this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};K.prototype.pack_uint64=function(e){var r=e/Math.pow(2,32),t=e%Math.pow(2,32);this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255),this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};K.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};K.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};K.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};K.prototype.pack_int64=function(e){var r=Math.floor(e/Math.pow(2,32)),t=e%Math.pow(2,32);this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255),this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};function ts(e){var r=e.charCodeAt(0);return r<=2047?"00":r<=65535?"000":r<=2097151?"0000":r<=67108863?"00000":"000000"}function rs(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,ts).length}let mi=!0,gi=!0;function tt(e,r,t){const n=e.match(r);return n&&n.length>=t&&parseInt(n[t],10)}function Qe(e,r,t){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(c,l){if(c!==r)return i.apply(this,arguments);const s=o=>{const u=t(o);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(l,s),i.apply(this,[c,s])};const a=n.removeEventListener;n.removeEventListener=function(c,l){if(c!==r||!this._eventMap||!this._eventMap[r])return a.apply(this,arguments);if(!this._eventMap[r].has(l))return a.apply(this,arguments);const s=this._eventMap[r].get(l);return this._eventMap[r].delete(l),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,s])},Object.defineProperty(n,"on"+r,{get(){return this["_on"+r]},set(c){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),c&&this.addEventListener(r,this["_on"+r]=c)},enumerable:!0,configurable:!0})}function ns(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(mi=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function is(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(gi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Rr(){if(typeof window=="object"){if(mi)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Vt(e,r){!gi||console.warn(e+" is deprecated, please use "+r+" instead.")}function as(e){const r={browser:null,version:null};if(typeof e>"u"||!e.navigator)return r.browser="Not a browser.",r;const{navigator:t}=e;if(t.mozGetUserMedia)r.browser="firefox",r.version=tt(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser="chrome",r.version=tt(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=tt(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=tt(t.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return r.browser="Not a supported browser.",r;return r}function dn(e){return Object.prototype.toString.call(e)==="[object Object]"}function yi(e){return dn(e)?Object.keys(e).reduce(function(r,t){const n=dn(e[t]),i=n?yi(e[t]):e[t],a=n&&!Object.keys(i).length;return i===void 0||a?r:Object.assign(r,{[t]:i})},{}):e}function lr(e,r,t){!r||t.has(r.id)||(t.set(r.id,r),Object.keys(r).forEach(n=>{n.endsWith("Id")?lr(e,e.get(r[n]),t):n.endsWith("Ids")&&r[n].forEach(i=>{lr(e,e.get(i),t)})}))}function pn(e,r,t){const n=t?"outbound-rtp":"inbound-rtp",i=new Map;if(r===null)return i;const a=[];return e.forEach(c=>{c.type==="track"&&c.trackIdentifier===r.id&&a.push(c)}),a.forEach(c=>{e.forEach(l=>{l.type===n&&l.trackId===c.id&&lr(e,l,i)})}),i}const hn=Rr;function bi(e,r){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const s={};return Object.keys(l).forEach(o=>{if(o==="require"||o==="advanced"||o==="mediaSource")return;const u=typeof l[o]=="object"?l[o]:{ideal:l[o]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const f=function(d,p){return d?d+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){s.optional=s.optional||[];let d={};typeof u.ideal=="number"?(d[f("min",o)]=u.ideal,s.optional.push(d),d={},d[f("max",o)]=u.ideal,s.optional.push(d)):(d[f("",o)]=u.ideal,s.optional.push(d))}u.exact!==void 0&&typeof u.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[f("",o)]=u.exact):["min","max"].forEach(d=>{u[d]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[f(d,o)]=u[d])})}),l.advanced&&(s.optional=(s.optional||[]).concat(l.advanced)),s},i=function(l,s){if(r.version>=61)return s(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const o=function(u,f,d){f in u&&!(d in u)&&(u[d]=u[f],delete u[f])};l=JSON.parse(JSON.stringify(l)),o(l.audio,"autoGainControl","googAutoGainControl"),o(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let o=l.video.facingMode;o=o&&(typeof o=="object"?o:{ideal:o});const u=r.version<66;if(o&&(o.exact==="user"||o.exact==="environment"||o.ideal==="user"||o.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let f;if(o.exact==="environment"||o.ideal==="environment"?f=["back","rear"]:(o.exact==="user"||o.ideal==="user")&&(f=["front"]),f)return t.mediaDevices.enumerateDevices().then(d=>{d=d.filter(h=>h.kind==="videoinput");let p=d.find(h=>f.some(v=>h.label.toLowerCase().includes(v)));return!p&&d.length&&f.includes("back")&&(p=d[d.length-1]),p&&(l.video.deviceId=o.exact?{exact:p.deviceId}:{ideal:p.deviceId}),l.video=n(l.video),hn("chrome: "+JSON.stringify(l)),s(l)})}l.video=n(l.video)}return hn("chrome: "+JSON.stringify(l)),s(l)},a=function(l){return r.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,s,o){i(l,u=>{t.webkitGetUserMedia(u,s,f=>{o&&o(a(f))})})};if(t.getUserMedia=c.bind(t),t.mediaDevices.getUserMedia){const l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(s){return i(s,o=>l(o).then(u=>{if(o.audio&&!u.getAudioTracks().length||o.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(a(u))))}}}function os(e,r){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&!!e.navigator.mediaDevices){if(typeof r!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return r(n).then(i=>{const a=n.video&&n.video.width,c=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},a&&(n.video.mandatory.maxWidth=a),c&&(n.video.mandatory.maxHeight=c),e.navigator.mediaDevices.getUserMedia(n)})}}}function _i(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Si(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):a={track:i.track};const c=new Event("track");c.track=i.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)}),n.stream.getTracks().forEach(i=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===i.id):a={track:i};const c=new Event("track");c.track=i,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else Qe(e,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function Ci(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const r=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,s){let o=i.apply(this,arguments);return o||(o=r(this,l),this._senders.push(o)),o};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const s=this._senders.indexOf(l);s!==-1&&this._senders.splice(s,1)}}const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(r(this,c))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(s=>s.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ti(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,i,a]=arguments;if(arguments.length>0&&typeof n=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof n!="function"))return r.apply(this,[]);const c=function(s){const o={};return s.result().forEach(f=>{const d={id:f.id,timestamp:f.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[f.type]||f.type};f.names().forEach(p=>{d[p]=f.stat(p)}),o[d.id]=d}),o},l=function(s){return new Map(Object.keys(s).map(o=>[o,s[o]]))};if(arguments.length>=2){const s=function(o){i(l(c(o)))};return r.apply(this,[s,n])}return new Promise((s,o)=>{r.apply(this,[function(u){s(l(c(u)))},o])}).then(i,a)}}function ki(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(c=>c._pc=this),a});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>pn(c,a.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(a=>a._pc=this),i}),Qe(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>pn(a,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let i,a,c;return this.getSenders().forEach(l=>{l.track===n&&(i?c=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===n&&(a?c=!0:a=l),l.track===n)),c||i&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function xi(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=r.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(s)===-1&&this._shimmedLocalStreams[l.id].push(s):this._shimmedLocalStreams[l.id]=[l,s],s};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(o=>{if(this.getSenders().find(f=>f.track===o))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();t.apply(this,arguments);const s=this.getSenders().filter(o=>l.indexOf(o)===-1);this._shimmedLocalStreams[c.id]=[c].concat(s)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const s=this._shimmedLocalStreams[l].indexOf(c);s!==-1&&this._shimmedLocalStreams[l].splice(s,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Pi(e,r){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&r.version>=65)return xi(e);const t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=t.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(f=>this._reverseStreams[f.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const f=new e.MediaStream(u.getTracks());this._streams[u.id]=f,this._reverseStreams[f.id]=u,u=f}n.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(v=>v===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const h=this._streams[f.id];if(h)h.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new e.MediaStream([u]);this._streams[f.id]=v,this._reverseStreams[v.id]=f,this.addStream(v)}return this.getSenders().find(v=>v.track===u)};function a(o,u){let f=u.sdp;return Object.keys(o._reverseStreams||[]).forEach(d=>{const p=o._reverseStreams[d],h=o._streams[p.id];f=f.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:f})}function c(o,u){let f=u.sdp;return Object.keys(o._reverseStreams||[]).forEach(d=>{const p=o._reverseStreams[d],h=o._streams[p.id];f=f.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:f})}["createOffer","createAnswer"].forEach(function(o){const u=e.RTCPeerConnection.prototype[o],f={[o](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[h=>{const v=a(this,h);d[0].apply(null,[v])},h=>{d[1]&&d[1].apply(null,h)},arguments[2]]):u.apply(this,arguments).then(h=>a(this,h))}};e.RTCPeerConnection.prototype[o]=f[o]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const o=s.get.apply(this);return o.type===""?o:a(this,o)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(v=>u.track===v)&&(d=this._streams[p])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ur(e,r){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!!e.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]})}function Ri(e,r){Qe(e,"negotiationneeded",t=>{const n=t.target;if(!((r.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}var vn=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:_i,shimOnTrack:Si,shimGetSendersWithDtmf:Ci,shimGetStats:Ti,shimSenderReceiverGetStats:ki,shimAddTrackRemoveTrackWithNative:xi,shimAddTrackRemoveTrack:Pi,shimPeerConnection:ur,fixNegotiationNeeded:Ri,shimGetUserMedia:bi,shimGetDisplayMedia:os},Symbol.toStringTag,{value:"Module"}));function ss(e,r){let t=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(n=>{if(n&&(n.urls||n.url)){let i=n.urls||n.url;n.url&&!n.urls&&Vt("RTCIceServer.url","RTCIceServer.urls");const a=typeof i=="string";return a&&(i=[i]),i=i.filter(c=>{if(c.indexOf("stun:")===0)return!1;const l=c.startsWith("turn")&&!c.startsWith("turn:[")&&c.includes("transport=udp");return l&&!t?(t=!0,!0):l&&!t}),delete n.url,n.urls=a?i[0]:i,!!i.length}})}var Er={exports:{}};(function(e){var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(t){return t.trim().split(`
`).map(function(n){return n.trim()})},r.splitSections=function(t){var n=t.split(`
m=`);return n.map(function(i,a){return(a>0?"m="+i:i).trim()+`\r
`})},r.getDescription=function(t){var n=r.splitSections(t);return n&&n[0]},r.getMediaSections=function(t){var n=r.splitSections(t);return n.shift(),n},r.matchPrefix=function(t,n){return r.splitLines(t).filter(function(i){return i.indexOf(n)===0})},r.parseCandidate=function(t){var n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");for(var i={foundation:n[0],component:parseInt(n[1],10),protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]},a=8;a<n.length;a+=2)switch(n[a]){case"raddr":i.relatedAddress=n[a+1];break;case"rport":i.relatedPort=parseInt(n[a+1],10);break;case"tcptype":i.tcpType=n[a+1];break;case"ufrag":i.ufrag=n[a+1],i.usernameFragment=n[a+1];break;default:i[n[a]]=n[a+1];break}return i},r.writeCandidate=function(t){var n=[];n.push(t.foundation),n.push(t.component),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);var i=t.type;return n.push("typ"),n.push(i),i!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},r.parseIceOptions=function(t){return t.substr(14).split(" ")},r.parseRtpMap=function(t){var n=t.substr(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},r.writeRtpMap=function(t){var n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);var i=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(i!==1?"/"+i:"")+`\r
`},r.parseExtmap=function(t){var n=t.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},r.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+`\r
`},r.parseFmtp=function(t){for(var n={},i,a=t.substr(t.indexOf(" ")+1).split(";"),c=0;c<a.length;c++)i=a[c].trim().split("="),n[i[0].trim()]=i[1];return n},r.writeFmtp=function(t){var n="",i=t.payloadType;if(t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var a=[];Object.keys(t.parameters).forEach(function(c){t.parameters[c]?a.push(c+"="+t.parameters[c]):a.push(c)}),n+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return n},r.parseRtcpFb=function(t){var n=t.substr(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},r.writeRtcpFb=function(t){var n="",i=t.payloadType;return t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(a){n+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},r.parseSsrcMedia=function(t){var n=t.indexOf(" "),i={ssrc:parseInt(t.substr(7,n-7),10)},a=t.indexOf(":",n);return a>-1?(i.attribute=t.substr(n+1,a-n-1),i.value=t.substr(a+1)):i.attribute=t.substr(n+1),i},r.parseSsrcGroup=function(t){var n=t.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(function(i){return parseInt(i,10)})}},r.getMid=function(t){var n=r.matchPrefix(t,"a=mid:")[0];if(n)return n.substr(6)},r.parseFingerprint=function(t){var n=t.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1]}},r.getDtlsParameters=function(t,n){var i=r.matchPrefix(t+n,"a=fingerprint:");return{role:"auto",fingerprints:i.map(r.parseFingerprint)}},r.writeDtlsParameters=function(t,n){var i="a=setup:"+n+`\r
`;return t.fingerprints.forEach(function(a){i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},r.parseCryptoLine=function(t){var n=t.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},r.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?r.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;var n=t.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},r.getCryptoParameters=function(t,n){var i=r.matchPrefix(t+n,"a=crypto:");return i.map(r.parseCryptoLine)},r.getIceParameters=function(t,n){var i=r.matchPrefix(t+n,"a=ice-ufrag:")[0],a=r.matchPrefix(t+n,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substr(12),password:a.substr(10)}:null},r.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`},r.parseRtpParameters=function(t){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=r.splitLines(t),a=i[0].split(" "),c=3;c<a.length;c++){var l=a[c],s=r.matchPrefix(t,"a=rtpmap:"+l+" ")[0];if(s){var o=r.parseRtpMap(s),u=r.matchPrefix(t,"a=fmtp:"+l+" ");switch(o.parameters=u.length?r.parseFmtp(u[0]):{},o.rtcpFeedback=r.matchPrefix(t,"a=rtcp-fb:"+l+" ").map(r.parseRtcpFb),n.codecs.push(o),o.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(o.name.toUpperCase());break}}}return r.matchPrefix(t,"a=extmap:").forEach(function(f){n.headerExtensions.push(r.parseExtmap(f))}),n},r.writeRtpDescription=function(t,n){var i="";i+="m="+t+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map(function(c){return c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(function(c){i+=r.writeRtpMap(c),i+=r.writeFmtp(c),i+=r.writeRtcpFb(c)});var a=0;return n.codecs.forEach(function(c){c.maxptime>a&&(a=c.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),i+=`a=rtcp-mux\r
`,n.headerExtensions&&n.headerExtensions.forEach(function(c){i+=r.writeExtmap(c)}),i},r.parseRtpEncodingParameters=function(t){var n=[],i=r.parseRtpParameters(t),a=i.fecMechanisms.indexOf("RED")!==-1,c=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=r.matchPrefix(t,"a=ssrc:").map(function(d){return r.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"}),s=l.length>0&&l[0].ssrc,o,u=r.matchPrefix(t,"a=ssrc-group:FID").map(function(d){var p=d.substr(17).split(" ");return p.map(function(h){return parseInt(h,10)})});u.length>0&&u[0].length>1&&u[0][0]===s&&(o=u[0][1]),i.codecs.forEach(function(d){if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){var p={ssrc:s,codecPayloadType:parseInt(d.parameters.apt,10)};s&&o&&(p.rtx={ssrc:o}),n.push(p),a&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:s,mechanism:c?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&s&&n.push({ssrc:s});var f=r.matchPrefix(t,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substr(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substr(5),10)*1e3*.95-50*40*8:f=void 0,n.forEach(function(d){d.maxBitrate=f})),n},r.parseRtcpParameters=function(t){var n={},i=r.matchPrefix(t,"a=ssrc:").map(function(l){return r.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);var a=r.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;var c=r.matchPrefix(t,"a=rtcp-mux");return n.mux=c.length>0,n},r.parseMsid=function(t){var n,i=r.matchPrefix(t,"a=msid:");if(i.length===1)return n=i[0].substr(7).split(" "),{stream:n[0],track:n[1]};var a=r.matchPrefix(t,"a=ssrc:").map(function(c){return r.parseSsrcMedia(c)}).filter(function(c){return c.attribute==="msid"});if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},r.parseSctpDescription=function(t){var n=r.parseMLine(t),i=r.matchPrefix(t,"a=max-message-size:"),a;i.length>0&&(a=parseInt(i[0].substr(19),10)),isNaN(a)&&(a=65536);var c=r.matchPrefix(t,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substr(12),10),protocol:n.fmt,maxMessageSize:a};var l=r.matchPrefix(t,"a=sctpmap:");if(l.length>0){var s=r.matchPrefix(t,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:a}}},r.writeSctpDescription=function(t,n){var i=[];return t.protocol!=="DTLS/SCTP"?i=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(t,n,i){var a,c=n!==void 0?n:2;t?a=t:a=r.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.writeMediaSection=function(t,n,i,a){var c=r.writeRtpDescription(t.kind,n);if(c+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),c+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),c+="a=mid:"+t.mid+`\r
`,t.direction?c+="a="+t.direction+`\r
`:t.rtpSender&&t.rtpReceiver?c+=`a=sendrecv\r
`:t.rtpSender?c+=`a=sendonly\r
`:t.rtpReceiver?c+=`a=recvonly\r
`:c+=`a=inactive\r
`,t.rtpSender){var l="msid:"+a.id+" "+t.rtpSender.track.id+`\r
`;c+="a="+l,c+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+l,t.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+l,c+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return c+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+`\r
`),c},r.getDirection=function(t,n){for(var i=r.splitLines(t),a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substr(2)}return n?r.getDirection(n):"sendrecv"},r.getKind=function(t){var n=r.splitLines(t),i=n[0].split(" ");return i[0].substr(2)},r.isRejected=function(t){return t.split(" ",2)[1]==="0"},r.parseMLine=function(t){var n=r.splitLines(t),i=n[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},r.parseOLine=function(t){var n=r.matchPrefix(t,"o=")[0],i=n.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},r.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;for(var n=r.splitLines(t),i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=r})(Er);var Et=Er.exports,w=Er.exports;function cs(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function mn(e,r,t,n,i){var a=w.writeRtpDescription(e.kind,r);if(a+=w.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=w.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),t==="offer"?"actpass":i||"active"),a+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?a+=`a=sendrecv\r
`:e.rtpSender?a+=`a=sendonly\r
`:e.rtpReceiver?a+=`a=recvonly\r
`:a+=`a=inactive\r
`,e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var l="msid:"+(n?n.id:"-")+" "+c+`\r
`;a+="a="+l,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+w.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+w.localCName+`\r
`),a}function ls(e,r){var t=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(n){if(n&&(n.urls||n.url)){var i=n.urls||n.url;n.url&&!n.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a=typeof i=="string";return a&&(i=[i]),i=i.filter(function(c){var l=c.indexOf("turn:")===0&&c.indexOf("transport=udp")!==-1&&c.indexOf("turn:[")===-1&&!t;return l?(t=!0,!0):c.indexOf("stun:")===0&&r>=14393&&c.indexOf("?transport=udp")===-1}),delete n.url,n.urls=a?i[0]:i,!!i.length}})}function bt(e,r){var t={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(a,c){a=parseInt(a,10);for(var l=0;l<c.length;l++)if(c[l].payloadType===a||c[l].preferredPayloadType===a)return c[l]},i=function(a,c,l,s){var o=n(a.parameters.apt,l),u=n(c.parameters.apt,s);return o&&u&&o.name.toLowerCase()===u.name.toLowerCase()};return e.codecs.forEach(function(a){for(var c=0;c<r.codecs.length;c++){var l=r.codecs[c];if(a.name.toLowerCase()===l.name.toLowerCase()&&a.clockRate===l.clockRate){if(a.name.toLowerCase()==="rtx"&&a.parameters&&l.parameters.apt&&!i(a,l,e.codecs,r.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(a.numChannels,l.numChannels),t.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(s){for(var o=0;o<a.rtcpFeedback.length;o++)if(a.rtcpFeedback[o].type===s.type&&a.rtcpFeedback[o].parameter===s.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(a){for(var c=0;c<r.headerExtensions.length;c++){var l=r.headerExtensions[c];if(a.uri===l.uri){t.headerExtensions.push(l);break}}}),t}function gn(e,r,t){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[r][e].indexOf(t)!==-1}function er(e,r){var t=e.getRemoteCandidates().find(function(n){return r.foundation===n.foundation&&r.ip===n.ip&&r.port===n.port&&r.priority===n.priority&&r.protocol===n.protocol&&r.type===n.type});return t||e.addRemoteCandidate(r),!t}function X(e,r){var t=new Error(r);return t.name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}var us=function(e,r){function t(s,o){o.addTrack(s),o.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:s}))}function n(s,o){o.removeTrack(s),o.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:s}))}function i(s,o,u,f){var d=new Event("track");d.track=o,d.receiver=u,d.transceiver={receiver:u},d.streams=f,e.setTimeout(function(){s._dispatchEvent("track",d)})}var a=function(s){var o=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(d){o[d]=u[d].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw X("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=ls(s.iceServers||[],r),this._iceGatherers=[],s.iceCandidatePoolSize)for(var f=s.iceCandidatePoolSize;f>0;f--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=w.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(a.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(a.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),a.prototype.onicecandidate=null,a.prototype.onaddstream=null,a.prototype.ontrack=null,a.prototype.onremovestream=null,a.prototype.onsignalingstatechange=null,a.prototype.oniceconnectionstatechange=null,a.prototype.onconnectionstatechange=null,a.prototype.onicegatheringstatechange=null,a.prototype.onnegotiationneeded=null,a.prototype.ondatachannel=null,a.prototype._dispatchEvent=function(s,o){this._isClosed||(this.dispatchEvent(o),typeof this["on"+s]=="function"&&this["on"+s](o))},a.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},a.prototype.getConfiguration=function(){return this._config},a.prototype.getLocalStreams=function(){return this.localStreams},a.prototype.getRemoteStreams=function(){return this.remoteStreams},a.prototype._createTransceiver=function(s,o){var u=this.transceivers.length>0,f={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)f.iceTransport=this.transceivers[0].iceTransport,f.dtlsTransport=this.transceivers[0].dtlsTransport;else{var d=this._createIceAndDtlsTransports();f.iceTransport=d.iceTransport,f.dtlsTransport=d.dtlsTransport}return o||this.transceivers.push(f),f},a.prototype.addTrack=function(s,o){if(this._isClosed)throw X("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(p){return p.track===s});if(u)throw X("InvalidAccessError","Track already exists.");for(var f,d=0;d<this.transceivers.length;d++)!this.transceivers[d].track&&this.transceivers[d].kind===s.kind&&(f=this.transceivers[d]);return f||(f=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(o)===-1&&this.localStreams.push(o),f.track=s,f.stream=o,f.rtpSender=new e.RTCRtpSender(s,f.dtlsTransport),f.rtpSender},a.prototype.addStream=function(s){var o=this;if(r>=15025)s.getTracks().forEach(function(f){o.addTrack(f,s)});else{var u=s.clone();s.getTracks().forEach(function(f,d){var p=u.getTracks()[d];f.addEventListener("enabled",function(h){p.enabled=h.enabled})}),u.getTracks().forEach(function(f){o.addTrack(f,u)})}},a.prototype.removeTrack=function(s){if(this._isClosed)throw X("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var o=this.transceivers.find(function(d){return d.rtpSender===s});if(!o)throw X("InvalidAccessError","Sender was not created by this connection.");var u=o.stream;o.rtpSender.stop(),o.rtpSender=null,o.track=null,o.stream=null;var f=this.transceivers.map(function(d){return d.stream});f.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},a.prototype.removeStream=function(s){var o=this;s.getTracks().forEach(function(u){var f=o.getSenders().find(function(d){return d.track===u});f&&o.removeTrack(f)})},a.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},a.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},a.prototype._createIceGatherer=function(s,o){var u=this;if(o&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var f=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(f,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(d){var p=!d.candidate||Object.keys(d.candidate).length===0;f.state=p?"completed":"gathering",u.transceivers[s].bufferedCandidateEvents!==null&&u.transceivers[s].bufferedCandidateEvents.push(d)},f.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),f},a.prototype._gather=function(s,o){var u=this,f=this.transceivers[o].iceGatherer;if(!f.onlocalcandidate){var d=this.transceivers[o].bufferedCandidateEvents;this.transceivers[o].bufferedCandidateEvents=null,f.removeEventListener("localcandidate",this.transceivers[o].bufferCandidates),f.onlocalcandidate=function(p){if(!(u.usingBundle&&o>0)){var h=new Event("icecandidate");h.candidate={sdpMid:s,sdpMLineIndex:o};var v=p.candidate,T=!v||Object.keys(v).length===0;if(T)(f.state==="new"||f.state==="gathering")&&(f.state="completed");else{f.state==="new"&&(f.state="gathering"),v.component=1,v.ufrag=f.getLocalParameters().usernameFragment;var g=w.writeCandidate(v);h.candidate=Object.assign(h.candidate,w.parseCandidate(g)),h.candidate.candidate=g,h.candidate.toJSON=function(){return{candidate:h.candidate.candidate,sdpMid:h.candidate.sdpMid,sdpMLineIndex:h.candidate.sdpMLineIndex,usernameFragment:h.candidate.usernameFragment}}}var m=w.getMediaSections(u._localDescription.sdp);T?m[h.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:m[h.candidate.sdpMLineIndex]+="a="+h.candidate.candidate+`\r
`,u._localDescription.sdp=w.getDescription(u._localDescription.sdp)+m.join("");var x=u.transceivers.every(function(b){return b.iceGatherer&&b.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),T||u._dispatchEvent("icecandidate",h),x&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},e.setTimeout(function(){d.forEach(function(p){f.onlocalcandidate(p)})},0)}},a.prototype._createIceAndDtlsTransports=function(){var s=this,o=new e.RTCIceTransport(null);o.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var u=new e.RTCDtlsTransport(o);return u.ondtlsstatechange=function(){s._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:o,dtlsTransport:u}},a.prototype._disposeIceAndDtlsTransports=function(s){var o=this.transceivers[s].iceGatherer;o&&(delete o.onlocalcandidate,delete this.transceivers[s].iceGatherer);var u=this.transceivers[s].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[s].iceTransport);var f=this.transceivers[s].dtlsTransport;f&&(delete f.ondtlsstatechange,delete f.onerror,delete this.transceivers[s].dtlsTransport)},a.prototype._transceive=function(s,o,u){var f=bt(s.localCapabilities,s.remoteCapabilities);o&&s.rtpSender&&(f.encodings=s.sendEncodingParameters,f.rtcp={cname:w.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(f.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(f)),u&&s.rtpReceiver&&f.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&r<15019&&s.recvEncodingParameters.forEach(function(d){delete d.rtx}),s.recvEncodingParameters.length?f.encodings=s.recvEncodingParameters:f.encodings=[{}],f.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(f.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(f.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(f))},a.prototype.setLocalDescription=function(s){var o=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(X("TypeError",'Unsupported type "'+s.type+'"'));if(!gn("setLocalDescription",s.type,o.signalingState)||o._isClosed)return Promise.reject(X("InvalidStateError","Can not set local "+s.type+" in state "+o.signalingState));var u,f;if(s.type==="offer")u=w.splitSections(s.sdp),f=u.shift(),u.forEach(function(p,h){var v=w.parseRtpParameters(p);o.transceivers[h].localCapabilities=v}),o.transceivers.forEach(function(p,h){o._gather(p.mid,h)});else if(s.type==="answer"){u=w.splitSections(o._remoteDescription.sdp),f=u.shift();var d=w.matchPrefix(f,"a=ice-lite").length>0;u.forEach(function(p,h){var v=o.transceivers[h],T=v.iceGatherer,g=v.iceTransport,m=v.dtlsTransport,x=v.localCapabilities,b=v.remoteCapabilities,y=w.isRejected(p)&&w.matchPrefix(p,"a=bundle-only").length===0;if(!y&&!v.rejected){var D=w.getIceParameters(p,f),R=w.getDtlsParameters(p,f);d&&(R.role="server"),(!o.usingBundle||h===0)&&(o._gather(v.mid,h),g.state==="new"&&g.start(T,D,d?"controlling":"controlled"),m.state==="new"&&m.start(R));var z=bt(x,b);o._transceive(v,z.codecs.length>0,!1)}})}return o._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},a.prototype.setRemoteDescription=function(s){var o=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(X("TypeError",'Unsupported type "'+s.type+'"'));if(!gn("setRemoteDescription",s.type,o.signalingState)||o._isClosed)return Promise.reject(X("InvalidStateError","Can not set remote "+s.type+" in state "+o.signalingState));var u={};o.remoteStreams.forEach(function(g){u[g.id]=g});var f=[],d=w.splitSections(s.sdp),p=d.shift(),h=w.matchPrefix(p,"a=ice-lite").length>0,v=w.matchPrefix(p,"a=group:BUNDLE ").length>0;o.usingBundle=v;var T=w.matchPrefix(p,"a=ice-options:")[0];return T?o.canTrickleIceCandidates=T.substr(14).split(" ").indexOf("trickle")>=0:o.canTrickleIceCandidates=!1,d.forEach(function(g,m){var x=w.splitLines(g),b=w.getKind(g),y=w.isRejected(g)&&w.matchPrefix(g,"a=bundle-only").length===0,D=x[0].substr(2).split(" ")[2],R=w.getDirection(g,p),z=w.parseMsid(g),N=w.getMid(g)||w.generateIdentifier();if(y||b==="application"&&(D==="DTLS/SCTP"||D==="UDP/DTLS/SCTP")){o.transceivers[m]={mid:N,kind:b,protocol:D,rejected:!0};return}!y&&o.transceivers[m]&&o.transceivers[m].rejected&&(o.transceivers[m]=o._createTransceiver(b,!0));var M,V,oe,Y,G,se,k,j,B,U=w.parseRtpParameters(g),pe,be;y||(pe=w.getIceParameters(g,p),be=w.getDtlsParameters(g,p),be.role="client"),k=w.parseRtpEncodingParameters(g);var _e=w.parseRtcpParameters(g),me=w.matchPrefix(g,"a=end-of-candidates",p).length>0,ge=w.matchPrefix(g,"a=candidate:").map(function(A){return w.parseCandidate(A)}).filter(function(A){return A.component===1});if((s.type==="offer"||s.type==="answer")&&!y&&v&&m>0&&o.transceivers[m]&&(o._disposeIceAndDtlsTransports(m),o.transceivers[m].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[m].iceTransport=o.transceivers[0].iceTransport,o.transceivers[m].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[m].rtpSender&&o.transceivers[m].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[m].rtpReceiver&&o.transceivers[m].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),s.type==="offer"&&!y){M=o.transceivers[m]||o._createTransceiver(b),M.mid=N,M.iceGatherer||(M.iceGatherer=o._createIceGatherer(m,v)),ge.length&&M.iceTransport.state==="new"&&(me&&(!v||m===0)?M.iceTransport.setRemoteCandidates(ge):ge.forEach(function(A){er(M.iceTransport,A)})),j=e.RTCRtpReceiver.getCapabilities(b),r<15019&&(j.codecs=j.codecs.filter(function(A){return A.name!=="rtx"})),se=M.sendEncodingParameters||[{ssrc:(2*m+2)*1001}];var Ee=!1;if(R==="sendrecv"||R==="sendonly"){if(Ee=!M.rtpReceiver,G=M.rtpReceiver||new e.RTCRtpReceiver(M.dtlsTransport,b),Ee){var le;B=G.track,z&&z.stream==="-"||(z?(u[z.stream]||(u[z.stream]=new e.MediaStream,Object.defineProperty(u[z.stream],"id",{get:function(){return z.stream}})),Object.defineProperty(B,"id",{get:function(){return z.track}}),le=u[z.stream]):(u.default||(u.default=new e.MediaStream),le=u.default)),le&&(t(B,le),M.associatedRemoteMediaStreams.push(le)),f.push([B,G,le])}}else M.rtpReceiver&&M.rtpReceiver.track&&(M.associatedRemoteMediaStreams.forEach(function(A){var Oe=A.getTracks().find(function(Ke){return Ke.id===M.rtpReceiver.track.id});Oe&&n(Oe,A)}),M.associatedRemoteMediaStreams=[]);M.localCapabilities=j,M.remoteCapabilities=U,M.rtpReceiver=G,M.rtcpParameters=_e,M.sendEncodingParameters=se,M.recvEncodingParameters=k,o._transceive(o.transceivers[m],!1,Ee)}else if(s.type==="answer"&&!y){M=o.transceivers[m],V=M.iceGatherer,oe=M.iceTransport,Y=M.dtlsTransport,G=M.rtpReceiver,se=M.sendEncodingParameters,j=M.localCapabilities,o.transceivers[m].recvEncodingParameters=k,o.transceivers[m].remoteCapabilities=U,o.transceivers[m].rtcpParameters=_e,ge.length&&oe.state==="new"&&((h||me)&&(!v||m===0)?oe.setRemoteCandidates(ge):ge.forEach(function(A){er(M.iceTransport,A)})),(!v||m===0)&&(oe.state==="new"&&oe.start(V,pe,"controlling"),Y.state==="new"&&Y.start(be));var Se=bt(M.localCapabilities,M.remoteCapabilities),Je=Se.codecs.filter(function(A){return A.name.toLowerCase()==="rtx"}).length;!Je&&M.sendEncodingParameters[0].rtx&&delete M.sendEncodingParameters[0].rtx,o._transceive(M,R==="sendrecv"||R==="recvonly",R==="sendrecv"||R==="sendonly"),G&&(R==="sendrecv"||R==="sendonly")?(B=G.track,z?(u[z.stream]||(u[z.stream]=new e.MediaStream),t(B,u[z.stream]),f.push([B,G,u[z.stream]])):(u.default||(u.default=new e.MediaStream),t(B,u.default),f.push([B,G,u.default]))):delete M.rtpReceiver}}),o._dtlsRole===void 0&&(o._dtlsRole=s.type==="offer"?"active":"passive"),o._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(u).forEach(function(g){var m=u[g];if(m.getTracks().length){if(o.remoteStreams.indexOf(m)===-1){o.remoteStreams.push(m);var x=new Event("addstream");x.stream=m,e.setTimeout(function(){o._dispatchEvent("addstream",x)})}f.forEach(function(b){var y=b[0],D=b[1];m.id===b[2].id&&i(o,y,D,[m])})}}),f.forEach(function(g){g[2]||i(o,g[0],g[1],[])}),e.setTimeout(function(){!(o&&o.transceivers)||o.transceivers.forEach(function(g){g.iceTransport&&g.iceTransport.state==="new"&&g.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),g.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},a.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},a.prototype._updateSignalingState=function(s){this.signalingState=s;var o=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",o)},a.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var o=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",o)}},0))},a.prototype._updateIceConnectionState=function(){var s,o={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(f){f.iceTransport&&!f.rejected&&o[f.iceTransport.state]++}),s="new",o.failed>0?s="failed":o.checking>0?s="checking":o.disconnected>0?s="disconnected":o.new>0?s="new":o.connected>0?s="connected":o.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},a.prototype._updateConnectionState=function(){var s,o={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(f){f.iceTransport&&f.dtlsTransport&&!f.rejected&&(o[f.iceTransport.state]++,o[f.dtlsTransport.state]++)}),o.connected+=o.completed,s="new",o.failed>0?s="failed":o.connecting>0?s="connecting":o.disconnected>0?s="disconnected":o.new>0?s="new":o.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},a.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(X("InvalidStateError","Can not call createOffer after close"));var o=s.transceivers.filter(function(h){return h.kind==="audio"}).length,u=s.transceivers.filter(function(h){return h.kind==="video"}).length,f=arguments[0];if(f){if(f.mandatory||f.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");f.offerToReceiveAudio!==void 0&&(f.offerToReceiveAudio===!0?o=1:f.offerToReceiveAudio===!1?o=0:o=f.offerToReceiveAudio),f.offerToReceiveVideo!==void 0&&(f.offerToReceiveVideo===!0?u=1:f.offerToReceiveVideo===!1?u=0:u=f.offerToReceiveVideo)}for(s.transceivers.forEach(function(h){h.kind==="audio"?(o--,o<0&&(h.wantReceive=!1)):h.kind==="video"&&(u--,u<0&&(h.wantReceive=!1))});o>0||u>0;)o>0&&(s._createTransceiver("audio"),o--),u>0&&(s._createTransceiver("video"),u--);var d=w.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(h,v){var T=h.track,g=h.kind,m=h.mid||w.generateIdentifier();h.mid=m,h.iceGatherer||(h.iceGatherer=s._createIceGatherer(v,s.usingBundle));var x=e.RTCRtpSender.getCapabilities(g);r<15019&&(x.codecs=x.codecs.filter(function(y){return y.name!=="rtx"})),x.codecs.forEach(function(y){y.name==="H264"&&y.parameters["level-asymmetry-allowed"]===void 0&&(y.parameters["level-asymmetry-allowed"]="1"),h.remoteCapabilities&&h.remoteCapabilities.codecs&&h.remoteCapabilities.codecs.forEach(function(D){y.name.toLowerCase()===D.name.toLowerCase()&&y.clockRate===D.clockRate&&(y.preferredPayloadType=D.payloadType)})}),x.headerExtensions.forEach(function(y){var D=h.remoteCapabilities&&h.remoteCapabilities.headerExtensions||[];D.forEach(function(R){y.uri===R.uri&&(y.id=R.id)})});var b=h.sendEncodingParameters||[{ssrc:(2*v+1)*1001}];T&&r>=15019&&g==="video"&&!b[0].rtx&&(b[0].rtx={ssrc:b[0].ssrc+1}),h.wantReceive&&(h.rtpReceiver=new e.RTCRtpReceiver(h.dtlsTransport,g)),h.localCapabilities=x,h.sendEncodingParameters=b}),s._config.bundlePolicy!=="max-compat"&&(d+="a=group:BUNDLE "+s.transceivers.map(function(h){return h.mid}).join(" ")+`\r
`),d+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(h,v){d+=mn(h,h.localCapabilities,"offer",h.stream,s._dtlsRole),d+=`a=rtcp-rsize\r
`,h.iceGatherer&&s.iceGatheringState!=="new"&&(v===0||!s.usingBundle)&&(h.iceGatherer.getLocalCandidates().forEach(function(T){T.component=1,d+="a="+w.writeCandidate(T)+`\r
`}),h.iceGatherer.state==="completed"&&(d+=`a=end-of-candidates\r
`))});var p=new e.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(p)},a.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(X("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(X("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var o=w.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(o+="a=group:BUNDLE "+s.transceivers.map(function(d){return d.mid}).join(" ")+`\r
`),o+=`a=ice-options:trickle\r
`;var u=w.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(d,p){if(!(p+1>u)){if(d.rejected){d.kind==="application"?d.protocol==="DTLS/SCTP"?o+=`m=application 0 DTLS/SCTP 5000\r
`:o+="m=application 0 "+d.protocol+` webrtc-datachannel\r
`:d.kind==="audio"?o+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:d.kind==="video"&&(o+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),o+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+d.mid+`\r
`;return}if(d.stream){var h;d.kind==="audio"?h=d.stream.getAudioTracks()[0]:d.kind==="video"&&(h=d.stream.getVideoTracks()[0]),h&&r>=15019&&d.kind==="video"&&!d.sendEncodingParameters[0].rtx&&(d.sendEncodingParameters[0].rtx={ssrc:d.sendEncodingParameters[0].ssrc+1})}var v=bt(d.localCapabilities,d.remoteCapabilities),T=v.codecs.filter(function(g){return g.name.toLowerCase()==="rtx"}).length;!T&&d.sendEncodingParameters[0].rtx&&delete d.sendEncodingParameters[0].rtx,o+=mn(d,v,"answer",d.stream,s._dtlsRole),d.rtcpParameters&&d.rtcpParameters.reducedSize&&(o+=`a=rtcp-rsize\r
`)}});var f=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(f)},a.prototype.addIceCandidate=function(s){var o=this,u;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(f,d){if(o._remoteDescription)if(!s||s.candidate==="")for(var p=0;p<o.transceivers.length&&!(!o.transceivers[p].rejected&&(o.transceivers[p].iceTransport.addRemoteCandidate({}),u=w.getMediaSections(o._remoteDescription.sdp),u[p]+=`a=end-of-candidates\r
`,o._remoteDescription.sdp=w.getDescription(o._remoteDescription.sdp)+u.join(""),o.usingBundle));p++);else{var h=s.sdpMLineIndex;if(s.sdpMid){for(var v=0;v<o.transceivers.length;v++)if(o.transceivers[v].mid===s.sdpMid){h=v;break}}var T=o.transceivers[h];if(T){if(T.rejected)return f();var g=Object.keys(s.candidate).length>0?w.parseCandidate(s.candidate):{};if(g.protocol==="tcp"&&(g.port===0||g.port===9)||g.component&&g.component!==1)return f();if((h===0||h>0&&T.iceTransport!==o.transceivers[0].iceTransport)&&!er(T.iceTransport,g))return d(X("OperationError","Can not add ICE candidate"));var m=s.candidate.trim();m.indexOf("a=")===0&&(m=m.substr(2)),u=w.getMediaSections(o._remoteDescription.sdp),u[h]+="a="+(g.type?m:"end-of-candidates")+`\r
`,o._remoteDescription.sdp=w.getDescription(o._remoteDescription.sdp)+u.join("")}else return d(X("OperationError","Can not add ICE candidate"))}else return d(X("InvalidStateError","Can not add ICE candidate without a remote description"));f()})},a.prototype.getStats=function(s){if(s&&s instanceof e.MediaStreamTrack){var o=null;if(this.transceivers.forEach(function(f){f.rtpSender&&f.rtpSender.track===s?o=f.rtpSender:f.rtpReceiver&&f.rtpReceiver.track===s&&(o=f.rtpReceiver)}),!o)throw X("InvalidAccessError","Invalid selector.");return o.getStats()}var u=[];return this.transceivers.forEach(function(f){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(d){f[d]&&u.push(f[d].getStats())})}),Promise.all(u).then(function(f){var d=new Map;return f.forEach(function(p){p.forEach(function(h){d.set(h.id,h)})}),d})};var c=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];c.forEach(function(s){var o=e[s];if(o&&o.prototype&&o.prototype.getStats){var u=o.prototype.getStats;o.prototype.getStats=function(){return u.apply(this).then(function(f){var d=new Map;return Object.keys(f).forEach(function(p){f[p].type=cs(f[p]),d.set(p,f[p])}),d})}}});var l=["createOffer","createAnswer"];return l.forEach(function(s){var o=a.prototype[s];a.prototype[s]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?o.apply(this,[arguments[2]]).then(function(f){typeof u[0]=="function"&&u[0].apply(null,[f])},function(f){typeof u[1]=="function"&&u[1].apply(null,[f])}):o.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(s){var o=a.prototype[s];a.prototype[s]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?o.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(f){typeof u[2]=="function"&&u[2].apply(null,[f])}):o.apply(this,arguments)}}),["getStats"].forEach(function(s){var o=a.prototype[s];a.prototype[s]=function(){var u=arguments;return typeof u[1]=="function"?o.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):o.apply(this,arguments)}}),a};function Ei(e){const r=e&&e.navigator,t=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},n=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(i){return n(i).catch(a=>Promise.reject(t(a)))}}function Oi(e){"getDisplayMedia"in e.navigator&&(!e.navigator.mediaDevices||e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function fr(e,r){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),r.version<15025)){const n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){n.set.call(this,i);const a=new Event("enabled");a.enabled=i,this.dispatchEvent(a)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const t=us(e,r.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=ss(i.iceServers,r.version),Rr("ICE servers after filtering:",i.iceServers)),new t(i)},e.RTCPeerConnection.prototype=t.prototype}function Di(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var yn=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:fr,shimReplaceTrack:Di,shimGetUserMedia:Ei,shimGetDisplayMedia:Oi},Symbol.toStringTag,{value:"Module"}));function Mi(e,r){const t=e&&e.navigator,n=e&&e.MediaStreamTrack;if(t.getUserMedia=function(i,a,c){Vt("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(a,c)},!(r.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(c,l,s){l in c&&!(s in c)&&(c[s]=c[l],delete c[l])},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),i(c.audio,"autoGainControl","mozAutoGainControl"),i(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},n&&n.prototype.getSettings){const c=n.prototype.getSettings;n.prototype.getSettings=function(){const l=c.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const c=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function fs(e,r){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return n.video===!0?n.video={mediaSource:r}:n.video.mediaSource=r,e.navigator.mediaDevices.getUserMedia(n)})}function Ii(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function dr(e,r){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=e.RTCPeerConnection.prototype[i],c={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=c[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return n.apply(this,[a||null]).then(s=>{if(r.version<53&&!c)try{s.forEach(o=>{o.type=t[o.type]||o.type})}catch(o){if(o.name!=="TypeError")throw o;s.forEach((u,f)=>{s.set(f,Object.assign({},u,{type:t[u.type]||u.type}))})}return s}).then(c,l)}}function Ai(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wi(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Qe(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ji(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){Vt("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Bi(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Li(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.addTransceiver;r&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],i=n&&"sendEncodings"in n;i&&n.sendEncodings.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=r.apply(this,arguments);if(i){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n.sendEncodings,c.sendEncodings=n.sendEncodings,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function zi(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const r=e.RTCRtpSender.prototype.getParameters;r&&(e.RTCRtpSender.prototype.getParameters=function(){const n=r.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Fi(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function $i(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const r=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}var bn=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:Ii,shimPeerConnection:dr,shimSenderGetStats:Ai,shimReceiverGetStats:wi,shimRemoveStream:ji,shimRTCDataChannel:Bi,shimAddTransceiver:Li,shimGetParameters:zi,shimCreateOffer:Fi,shimCreateAnswer:$i,shimGetUserMedia:Mi,shimGetDisplayMedia:fs},Symbol.toStringTag,{value:"Module"}));function qi(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>r.call(this,i,n)),n.getVideoTracks().forEach(i=>r.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),r.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const i=t.getTracks();this.getSenders().forEach(a=>{i.includes(a.track)&&this.removeTrack(a)})})}}function Ni(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,n.dispatchEvent(c)})}),r.apply(n,arguments)}}}function Ui(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,t=r.createOffer,n=r.createAnswer,i=r.setLocalDescription,a=r.setRemoteDescription,c=r.addIceCandidate;r.createOffer=function(o,u){const f=arguments.length>=2?arguments[2]:arguments[0],d=t.apply(this,[f]);return u?(d.then(o,u),Promise.resolve()):d},r.createAnswer=function(o,u){const f=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[f]);return u?(d.then(o,u),Promise.resolve()):d};let l=function(s,o,u){const f=i.apply(this,[s]);return u?(f.then(o,u),Promise.resolve()):f};r.setLocalDescription=l,l=function(s,o,u){const f=a.apply(this,[s]);return u?(f.then(o,u),Promise.resolve()):f},r.setRemoteDescription=l,l=function(s,o,u){const f=c.apply(this,[s]);return u?(f.then(o,u),Promise.resolve()):f},r.addIceCandidate=l}function Hi(e){const r=e&&e.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const t=r.mediaDevices,n=t.getUserMedia.bind(t);r.mediaDevices.getUserMedia=i=>n(Gi(i))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(n,i,a){r.mediaDevices.getUserMedia(n).then(i,a)}.bind(r))}function Gi(e){return e&&e.video!==void 0?Object.assign({},e,{video:yi(e.video)}):e}function Vi(e){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection;e.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const a=[];for(let c=0;c<n.iceServers.length;c++){let l=n.iceServers[c];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(Vt("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(n.iceServers[c])}n.iceServers=a}return new r(n,i)},e.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return r.generateCertificate}})}function Wi(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qi(e){const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video")}return r.apply(this,arguments)}}function Ji(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var _n=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:qi,shimRemoteStreamsAPI:Ni,shimCallbacksAPI:Ui,shimGetUserMedia:Hi,shimConstraints:Gi,shimRTCIceServerUrls:Vi,shimTrackEventTransceiver:Wi,shimCreateOfferLegacy:Qi,shimAudioContext:Ji},Symbol.toStringTag,{value:"Module"}));function Ot(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const r=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const i=new r(n),a=Et.parseCandidate(n.candidate),c=Object.assign(i,a);return c.toJSON=function(){return{candidate:c.candidate,sdpMid:c.sdpMid,sdpMLineIndex:c.sdpMLineIndex,usernameFragment:c.usernameFragment}},c}return new r(n)},e.RTCIceCandidate.prototype=r.prototype,Qe(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function rt(e,r){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(l){if(!l||!l.sdp)return!1;const s=Et.splitSections(l.sdp);return s.shift(),s.some(o=>{const u=Et.parseMLine(o);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(l){const s=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const o=parseInt(s[1],10);return o!==o?-1:o},i=function(l){let s=65536;return r.browser==="firefox"&&(r.version<57?l===-1?s=16384:s=2147483637:r.version<60?s=r.version===57?65535:65536:s=2147483637),s},a=function(l,s){let o=65536;r.browser==="firefox"&&r.version===57&&(o=65535);const u=Et.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?o=parseInt(u[0].substr(19),10):r.browser==="firefox"&&s!==-1&&(o=2147483637),o},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const s=n(arguments[0]),o=i(s),u=a(arguments[0],s);let f;o===0&&u===0?f=Number.POSITIVE_INFINITY:o===0||u===0?f=Math.max(o,u):f=Math.min(o,u);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return f}}),this._sctp=d}return c.apply(this,arguments)}}function nt(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function r(n,i){const a=n.send;n.send=function(){const l=arguments[0],s=l.length||l.size||l.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return r(i,this),i},Qe(e,"datachannel",n=>(r(n.channel,n.target),n))}function pr(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=r[t];r[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",i);a.dispatchEvent(c)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function hr(e,r){if(!e.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=i.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:a}):i.sdp=a}return t.apply(this,arguments)}}function Dt(e,r){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var ds=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Ot,shimMaxMessageSize:rt,shimSendThrowTypeError:nt,shimConnectionState:pr,removeExtmapAllowMixed:hr,shimAddIceCandidateNullOrEmpty:Dt},Symbol.toStringTag,{value:"Module"}));function ps({window:e}={},r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const t=Rr,n=as(e),i={browserDetails:n,commonShim:ds,extractVersion:tt,disableLog:ns,disableWarnings:is};switch(n.browser){case"chrome":if(!vn||!ur||!r.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=vn,Dt(e,n),bi(e,n),_i(e),ur(e,n),Si(e),Pi(e,n),Ci(e),Ti(e),ki(e),Ri(e,n),Ot(e),pr(e),rt(e,n),nt(e),hr(e,n);break;case"firefox":if(!bn||!dr||!r.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=bn,Dt(e,n),Mi(e,n),dr(e,n),Ii(e),ji(e),Ai(e),wi(e),Bi(e),Li(e),zi(e),Fi(e),$i(e),Ot(e),pr(e),rt(e,n),nt(e);break;case"edge":if(!yn||!fr||!r.shimEdge)return t("MS edge shim is not included in this adapter release."),i;t("adapter.js shimming edge."),i.browserShim=yn,Ei(e),Oi(e),fr(e,n),Di(e),rt(e,n),nt(e);break;case"safari":if(!_n||!r.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=_n,Dt(e,n),Vi(e),Qi(e),Ui(e),qi(e),Ni(e),Wi(e),Hi(e),Ji(e),Ot(e),rt(e,n),nt(e),hr(e,n);break;default:t("Unsupported browser!");break}return i}const Sn=ps({window:typeof window>"u"?void 0:window});function ye(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var tr=Sn.default||Sn,Xe=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),t=this.getVersion(),n=this.supportedBrowsers.includes(r);return n?r==="chrome"?t>=this.minChromeVersion:r==="firefox"?t>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return tr.browserDetails.browser},e.prototype.getVersion=function(){return tr.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var r=this.getBrowser(),t=tr.browserDetails.version||0;if(r==="chrome"&&t<this.minChromeVersion)return!1;if(r==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n,i=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),i=!0}catch{}finally{n&&n.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),Cn={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},hs=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Cn,this.browser=Xe.getBrowser(),this.browserVersion=Xe.getVersion(),this.supports=function(){var r={browser:Xe.isBrowserSupported(),webRTC:Xe.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;var t;try{t=new RTCPeerConnection(Cn),r.audioVideo=!0;var n=void 0;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!n.ordered;try{n.binaryType="blob",r.binaryBlob=!Xe.isIOS}catch{}}catch{}finally{n&&n.close()}}catch{}finally{t&&t.close()}return r}(),this.pack=fn.pack,this.unpack=fn.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(r){return!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r)},e.prototype.chunk=function(r){for(var t=[],n=r.size,i=Math.ceil(n/$.chunkedMTU),a=0,c=0;c<n;){var l=Math.min(n,c+$.chunkedMTU),s=r.slice(c,l),o={__peerData:this._dataCount,n:a,data:s,total:i};t.push(o),c=l,a++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(r,t){var n=new FileReader;return n.onload=function(i){i.target&&t(i.target.result)},n.readAsArrayBuffer(r),n},e.prototype.binaryStringToArrayBuffer=function(r){for(var t=new Uint8Array(r.length),n=0;n<r.length;n++)t[n]=r.charCodeAt(n)&255;return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),$=new hs,Ki={};ye(Ki,"Peer",()=>An,e=>An=e);var vt={},vs=Object.prototype.hasOwnProperty,te="~";function lt(){}Object.create&&(lt.prototype=Object.create(null),new lt().__proto__||(te=!1));function ms(e,r,t){this.fn=e,this.context=r,this.once=t||!1}function Yi(e,r,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var a=new ms(t,n||e,i),c=te?te+r:r;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function Mt(e,r){--e._eventsCount===0?e._events=new lt:delete e._events[r]}function Z(){this._events=new lt,this._eventsCount=0}Z.prototype.eventNames=function(){var r=[],t,n;if(this._eventsCount===0)return r;for(n in t=this._events)vs.call(t,n)&&r.push(te?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r};Z.prototype.listeners=function(r){var t=te?te+r:r,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,c=new Array(a);i<a;i++)c[i]=n[i].fn;return c};Z.prototype.listenerCount=function(r){var t=te?te+r:r,n=this._events[t];return n?n.fn?1:n.length:0};Z.prototype.emit=function(r,t,n,i,a,c){var l=te?te+r:r;if(!this._events[l])return!1;var s=this._events[l],o=arguments.length,u,f;if(s.fn){switch(s.once&&this.removeListener(r,s.fn,void 0,!0),o){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,n),!0;case 4:return s.fn.call(s.context,t,n,i),!0;case 5:return s.fn.call(s.context,t,n,i,a),!0;case 6:return s.fn.call(s.context,t,n,i,a,c),!0}for(f=1,u=new Array(o-1);f<o;f++)u[f-1]=arguments[f];s.fn.apply(s.context,u)}else{var d=s.length,p;for(f=0;f<d;f++)switch(s[f].once&&this.removeListener(r,s[f].fn,void 0,!0),o){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,t);break;case 3:s[f].fn.call(s[f].context,t,n);break;case 4:s[f].fn.call(s[f].context,t,n,i);break;default:if(!u)for(p=1,u=new Array(o-1);p<o;p++)u[p-1]=arguments[p];s[f].fn.apply(s[f].context,u)}}return!0};Z.prototype.on=function(r,t,n){return Yi(this,r,t,n,!1)};Z.prototype.once=function(r,t,n){return Yi(this,r,t,n,!0)};Z.prototype.removeListener=function(r,t,n,i){var a=te?te+r:r;if(!this._events[a])return this;if(!t)return Mt(this,a),this;var c=this._events[a];if(c.fn)c.fn===t&&(!i||c.once)&&(!n||c.context===n)&&Mt(this,a);else{for(var l=0,s=[],o=c.length;l<o;l++)(c[l].fn!==t||i&&!c[l].once||n&&c[l].context!==n)&&s.push(c[l]);s.length?this._events[a]=s.length===1?s[0]:s:Mt(this,a)}return this};Z.prototype.removeAllListeners=function(r){var t;return r?(t=te?te+r:r,this._events[t]&&Mt(this,t)):(this._events=new lt,this._eventsCount=0),this};Z.prototype.off=Z.prototype.removeListener;Z.prototype.addListener=Z.prototype.on;Z.prefixed=te;Z.EventEmitter=Z;vt=Z;var P={};ye(P,"LogLevel",()=>ne,e=>ne=e);ye(P,"default",()=>Tn,e=>Tn=e);var je=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return a},Be=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},gs="PeerJS: ",ne;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(ne||(ne={}));var ys=function(){function e(){this._logLevel=ne.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=ne.All&&this._print.apply(this,Be([ne.All],je(r),!1))},e.prototype.warn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=ne.Warnings&&this._print.apply(this,Be([ne.Warnings],je(r),!1))},e.prototype.error=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this._logLevel>=ne.Errors&&this._print.apply(this,Be([ne.Errors],je(r),!1))},e.prototype.setLogFunction=function(r){this._print=r},e.prototype._print=function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Be([gs],je(t),!1);for(var a in i)i[a]instanceof Error&&(i[a]="("+i[a].name+") "+i[a].message);r>=ne.All?console.log.apply(console,Be([],je(i),!1)):r>=ne.Warnings?console.warn.apply(console,Be(["WARNING"],je(i),!1)):r>=ne.Errors&&console.error.apply(console,Be(["ERROR"],je(i),!1))},e}(),Tn=new ys,Xi={};ye(Xi,"Socket",()=>kn,e=>kn=e);var he;(function(e){e.Data="data",e.Media="media"})(he||(he={}));var q;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(q||(q={}));var Ce;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(Ce||(Ce={}));var Pe;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Pe||(Pe={}));var Q;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(Q||(Q={}));var Or={};Or=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var bs=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_s=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return a},Ss=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Cs=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},kn=function(e){bs(r,e);function r(t,n,i,a,c,l){l===void 0&&(l=5e3);var s=e.call(this)||this;s.pingInterval=l,s._disconnected=!0,s._messagesQueue=[];var o=t?"wss://":"ws://";return s._baseUrl=o+n+":"+i+a+"peerjs?key="+c,s}return r.prototype.start=function(t,n){var i=this;this._id=t;var a="".concat(this._baseUrl,"&id=").concat(t,"&token=").concat(n);!!this._socket||!this._disconnected||(this._socket=new WebSocket(a+"&version="+Or.version),this._disconnected=!1,this._socket.onmessage=function(c){var l;try{l=JSON.parse(c.data),P.default.log("Server message received:",l)}catch{P.default.log("Invalid server message",c.data);return}i.emit(Pe.Message,l)},this._socket.onclose=function(c){i._disconnected||(P.default.log("Socket closed.",c),i._cleanup(),i._disconnected=!0,i.emit(Pe.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),P.default.log("Socket open"),i._scheduleHeartbeat())})},r.prototype._scheduleHeartbeat=function(){var t=this;this._wsPingTimer=setTimeout(function(){t._sendHeartbeat()},this.pingInterval)},r.prototype._sendHeartbeat=function(){if(!this._wsOpen()){P.default.log("Cannot send heartbeat, because socket closed");return}var t=JSON.stringify({type:Q.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()},r.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},r.prototype._sendQueuedMessages=function(){var t,n,i=Ss([],_s(this._messagesQueue),!1);this._messagesQueue=[];try{for(var a=Cs(i),c=a.next();!c.done;c=a.next()){var l=c.value;this.send(l)}}catch(s){t={error:s}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},r.prototype.send=function(t){if(!this._disconnected){if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Pe.Error,"Invalid message");return}if(!!this._wsOpen()){var n=JSON.stringify(t);this._socket.send(n)}}},r.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},r.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},r}(vt.EventEmitter),vr={};ye(vr,"MediaConnection",()=>Rn,e=>Rn=e);var Dr={};ye(Dr,"Negotiator",()=>xn,e=>xn=e);var qt=function(){return qt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qt.apply(this,arguments)},_t=function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function l(u){try{o(n.next(u))}catch(f){c(f)}}function s(u){try{o(n.throw(u))}catch(f){c(f)}}function o(u){u.done?a(u.value):i(u.value).then(l,s)}o((n=n.apply(e,r||[])).next())})},St=function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(u){o=[6,u],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},xn=function(){function e(r){this.connection=r}return e.prototype.startConnection=function(r){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===he.Media&&r._stream&&this._addTracksToConnection(r._stream,t),r.originator){if(this.connection.type===he.Data){var n=this.connection,i={ordered:!!r.reliable},a=t.createDataChannel(n.label,i);n.initialize(a)}this._makeOffer()}else this.handleSDP("OFFER",r.sdp)},e.prototype._startPeerConnection=function(){P.default.log("Creating RTCPeerConnection.");var r=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(r),r},e.prototype._setupListeners=function(r){var t=this,n=this.connection.peer,i=this.connection.connectionId,a=this.connection.type,c=this.connection.provider;P.default.log("Listening for ICE candidates."),r.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(P.default.log("Received ICE candidates for ".concat(n,":"),l.candidate),c.socket.send({type:Q.Candidate,payload:{candidate:l.candidate,type:a,connectionId:i},dst:n}))},r.oniceconnectionstatechange=function(){switch(r.iceConnectionState){case"failed":P.default.log("iceConnectionState is failed, closing connections to "+n),t.connection.emit("error",new Error("Negotiation of connection to "+n+" failed.")),t.connection.close();break;case"closed":P.default.log("iceConnectionState is closed, closing connections to "+n),t.connection.emit("error",new Error("Connection to "+n+" closed.")),t.connection.close();break;case"disconnected":P.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":r.onicecandidate=$.noop;break}t.connection.emit("iceStateChanged",r.iceConnectionState)},P.default.log("Listening for data channel"),r.ondatachannel=function(l){P.default.log("Received data channel");var s=l.channel,o=c.getConnection(n,i);o.initialize(s)},P.default.log("Listening for remote stream"),r.ontrack=function(l){P.default.log("Received remote stream");var s=l.streams[0],o=c.getConnection(n,i);if(o.type===he.Media){var u=o;t._addStreamToMediaConnection(s,u)}}},e.prototype.cleanup=function(){P.default.log("Cleaning up PeerConnection to "+this.connection.peer);var r=this.connection.peerConnection;if(!!r){this.connection.peerConnection=null,r.onicecandidate=r.oniceconnectionstatechange=r.ondatachannel=r.ontrack=function(){};var t=r.signalingState!=="closed",n=!1;if(this.connection.type===he.Data){var i=this.connection,a=i.dataChannel;a&&(n=!!a.readyState&&a.readyState!=="closed")}(t||n)&&r.close()}},e.prototype._makeOffer=function(){return _t(this,void 0,Promise,function(){var r,t,n,i,a,c,l;return St(this,function(s){switch(s.label){case 0:r=this.connection.peerConnection,t=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,r.createOffer(this.connection.options.constraints)];case 2:n=s.sent(),P.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,r.setLocalDescription(n)];case 4:return s.sent(),P.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:$.browser},this.connection.type===he.Data&&(a=this.connection,i=qt(qt({},i),{label:a.label,reliable:a.reliable,serialization:a.serialization})),t.socket.send({type:Q.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return c=s.sent(),c!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(q.WebRTC,c),P.default.log("Failed to setLocalDescription, ",c)),[3,6];case 6:return[3,8];case 7:return l=s.sent(),t.emitError(q.WebRTC,l),P.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return _t(this,void 0,Promise,function(){var r,t,n,i,a;return St(this,function(c){switch(c.label){case 0:r=this.connection.peerConnection,t=this.connection.provider,c.label=1;case 1:return c.trys.push([1,7,,8]),[4,r.createAnswer()];case 2:n=c.sent(),P.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,r.setLocalDescription(n)];case 4:return c.sent(),P.default.log("Set localDescription:",n,"for:".concat(this.connection.peer)),t.socket.send({type:Q.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:$.browser},dst:this.connection.peer}),[3,6];case 5:return i=c.sent(),t.emitError(q.WebRTC,i),P.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return a=c.sent(),t.emitError(q.WebRTC,a),P.default.log("Failed to create answer, ",a),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(r,t){return _t(this,void 0,Promise,function(){var n,i,a,c;return St(this,function(l){switch(l.label){case 0:t=new RTCSessionDescription(t),n=this.connection.peerConnection,i=this.connection.provider,P.default.log("Setting remote description",t),a=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,n.setRemoteDescription(t)];case 2:return l.sent(),P.default.log("Set remoteDescription:".concat(r," for:").concat(this.connection.peer)),r!=="OFFER"?[3,4]:[4,a._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return c=l.sent(),i.emitError(q.WebRTC,c),P.default.log("Failed to setRemoteDescription, ",c),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(r){return _t(this,void 0,Promise,function(){var t,n,i,a,c,l;return St(this,function(s){switch(s.label){case 0:P.default.log("handleCandidate:",r),t=r.candidate,n=r.sdpMLineIndex,i=r.sdpMid,a=this.connection.peerConnection,c=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:n,candidate:t}))];case 2:return s.sent(),P.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=s.sent(),c.emitError(q.WebRTC,l),P.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(r,t){if(P.default.log("add tracks from stream ".concat(r.id," to peer connection")),!t.addTrack)return P.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");r.getTracks().forEach(function(n){t.addTrack(n,r)})},e.prototype._addStreamToMediaConnection=function(r,t){P.default.log("add stream ".concat(r.id," to media connection ").concat(t.connectionId)),t.addStream(r)},e}(),Mr={};ye(Mr,"BaseConnection",()=>Pn,e=>Pn=e);var Ts=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pn=function(e){Ts(r,e);function r(t,n,i){var a=e.call(this)||this;return a.peer=t,a.provider=n,a.options=i,a._open=!1,a.metadata=i.metadata,a}return Object.defineProperty(r.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),r}(vt.EventEmitter),ks=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nt=function(){return Nt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nt.apply(this,arguments)},xs=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Rn=function(e){ks(r,e);function r(t,n,i){var a=e.call(this,t,n,i)||this;return a._localStream=a.options._stream,a.connectionId=a.options.connectionId||r.ID_PREFIX+$.randomToken(),a._negotiator=new Dr.Negotiator(a),a._localStream&&a._negotiator.startConnection({_stream:a._localStream,originator:!0}),a}return Object.defineProperty(r.prototype,"type",{get:function(){return he.Media},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),r.prototype.addStream=function(t){P.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,"stream",t)},r.prototype.handleMessage=function(t){var n=t.type,i=t.payload;switch(t.type){case Q.Answer:this._negotiator.handleSDP(n,i.sdp),this._open=!0;break;case Q.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:P.default.warn("Unrecognized message type:".concat(n," from peer:").concat(this.peer));break}},r.prototype.answer=function(t,n){var i,a;if(n===void 0&&(n={}),this._localStream){P.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection(Nt(Nt({},this.options._payload),{_stream:t}));var c=this.provider._getMessages(this.connectionId);try{for(var l=xs(c),s=l.next();!s.done;s=l.next()){var o=s.value;this.handleMessage(o)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}this._open=!0},r.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},r.ID_PREFIX="mc_",r}(Mr.BaseConnection),mr={};ye(mr,"DataConnection",()=>On,e=>On=e);var Zi={};ye(Zi,"EncodingQueue",()=>En,e=>En=e);var Ps=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),En=function(e){Ps(r,e);function r(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(n){t._processing=!1,n.target&&t.emit("done",n.target.result),t.doNextTask()},t.fileReader.onerror=function(n){P.default.error("EncodingQueue error:",n),t._processing=!1,t.destroy(),t.emit("error",n)},t}return Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),r.prototype.enque=function(t){this.queue.push(t),!this.processing&&this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(vt.EventEmitter),Rs=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Es=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},On=function(e){Rs(r,e);function r(t,n,i){var a=e.call(this,t,n,i)||this;return a.stringify=JSON.stringify,a.parse=JSON.parse,a._buffer=[],a._bufferSize=0,a._buffering=!1,a._chunkedData={},a._encodingQueue=new Zi.EncodingQueue,a.connectionId=a.options.connectionId||r.ID_PREFIX+$.randomToken(),a.label=a.options.label||a.connectionId,a.serialization=a.options.serialization||Ce.Binary,a.reliable=!!a.options.reliable,a._encodingQueue.on("done",function(c){a._bufferedSend(c)}),a._encodingQueue.on("error",function(){P.default.error("DC#".concat(a.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),a.close()}),a._negotiator=new Dr.Negotiator(a),a._negotiator.startConnection(a.options._payload||{originator:!0}),a}return Object.defineProperty(r.prototype,"type",{get:function(){return he.Data},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){this._dc=t,this._configureDataChannel()},r.prototype._configureDataChannel=function(){var t=this;(!$.supports.binaryBlob||$.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){P.default.log("DC#".concat(t.connectionId," dc connection success")),t._open=!0,t.emit("open")},this.dataChannel.onmessage=function(n){P.default.log("DC#".concat(t.connectionId," dc onmessage:"),n.data),t._handleDataMessage(n)},this.dataChannel.onclose=function(){P.default.log("DC#".concat(t.connectionId," dc closed for:"),t.peer),t.close()}},r.prototype._handleDataMessage=function(t){var n=this,i=t.data,a=i.constructor,c=this.serialization===Ce.Binary||this.serialization===Ce.BinaryUTF8,l=i;if(c){if(a===Blob){$.blobToArrayBuffer(i,function(o){var u=$.unpack(o);n.emit("data",u)});return}else if(a===ArrayBuffer)l=$.unpack(i);else if(a===String){var s=$.binaryStringToArrayBuffer(i);l=$.unpack(s)}}else this.serialization===Ce.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},r.prototype._handleChunk=function(t){var n=t.__peerData,i=this._chunkedData[n]||{data:[],count:0,total:t.total};if(i.data[t.n]=t.data,i.count++,this._chunkedData[n]=i,i.total===i.count){delete this._chunkedData[n];var a=new Blob(i.data);this._handleDataMessage({data:a})}},r.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},r.prototype.send=function(t,n){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===Ce.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===Ce.Binary||this.serialization===Ce.BinaryUTF8){var i=$.pack(t);if(!n&&i.size>$.chunkedMTU){this._sendChunks(i);return}$.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(t)},r.prototype._bufferedSend=function(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)},r.prototype._trySend=function(t){var n=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>r.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){n._buffering=!1,n._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(i){return P.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},r.prototype._tryBuffer=function(){if(!!this.open&&this._buffer.length!==0){var t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},r.prototype._sendChunks=function(t){var n,i,a=$.chunk(t);P.default.log("DC#".concat(this.connectionId," Try to send ").concat(a.length," chunks..."));try{for(var c=Es(a),l=c.next();!l.done;l=c.next()){var s=l.value;this.send(s,!0)}}catch(o){n={error:o}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},r.prototype.handleMessage=function(t){var n=t.payload;switch(t.type){case Q.Answer:this._negotiator.handleSDP(t.type,n.sdp);break;case Q.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:P.default.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}},r.ID_PREFIX="dc_",r.MAX_BUFFERED_AMOUNT=8388608,r}(Mr.BaseConnection),ea={};ye(ea,"API",()=>In,e=>In=e);var Dn=function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function l(u){try{o(n.next(u))}catch(f){c(f)}}function s(u){try{o(n.throw(u))}catch(f){c(f)}}function o(u){u.done?a(u.value):i(u.value).then(l,s)}o((n=n.apply(e,r||[])).next())})},Mn=function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(o){return function(u){return s([o,u])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(u){o=[6,u],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},In=function(){function e(r){this._options=r}return e.prototype._buildRequest=function(r){var t=this._options.secure?"https":"http",n=this._options,i=n.host,a=n.port,c=n.path,l=n.key,s=new URL("".concat(t,"://").concat(i,":").concat(a).concat(c).concat(l,"/").concat(r));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",Or.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return Dn(this,void 0,Promise,function(){var r,t,n;return Mn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(r=i.sent(),r.status!==200)throw new Error("Error. Status:".concat(r.status));return[2,r.text()];case 2:throw t=i.sent(),P.default.error("Error retrieving ID",t),n="",this._options.path==="/"&&this._options.host!==$.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return Dn(this,void 0,Promise,function(){var r,t,n;return Mn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(r=i.sent(),r.status!==200)throw r.status===401?(t="",this._options.host===$.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)):new Error("Error. Status:".concat(r.status));return[2,r.json()];case 2:throw n=i.sent(),P.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 3:return[2]}})})},e}(),Os=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),st=function(){return st=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},st.apply(this,arguments)},Ze=function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Ds=function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,a=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return a},An=function(e){Os(r,e);function r(t,n){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var a;return t&&t.constructor==Object?n=t:t&&(a=t.toString()),n=st({debug:0,host:$.CLOUD_HOST,port:$.CLOUD_PORT,path:"/",key:r.DEFAULT_KEY,token:$.randomToken(),config:$.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},n),i._options=n,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==$.CLOUD_HOST?i._options.secure=$.isSecure():i._options.host==$.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&P.default.setLogFunction(i._options.logFunction),P.default.logLevel=i._options.debug||0,i._api=new ea.API(n),i._socket=i._createServerConnection(),!$.supports.audioVideo&&!$.supports.data?(i._delayedAbort(q.BrowserIncompatible,"The current browser does not support WebRTC"),i):!!a&&!$.validateId(a)?(i._delayedAbort(q.InvalidID,'ID "'.concat(a,'" is invalid')),i):(a?i._initialize(a):i._api.retrieveId().then(function(c){return i._initialize(c)}).catch(function(c){return i._abort(q.ServerError,c)}),i)}return Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"connections",{get:function(){var t,n,i=Object.create(null);try{for(var a=Ze(this._connections),c=a.next();!c.done;c=a.next()){var l=Ds(c.value,2),s=l[0],o=l[1];i[s]=o}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),r.prototype._createServerConnection=function(){var t=this,n=new Xi.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(Pe.Message,function(i){t._handleMessage(i)}),n.on(Pe.Error,function(i){t._abort(q.SocketError,i)}),n.on(Pe.Disconnected,function(){t.disconnected||(t.emitError(q.Network,"Lost connection to server."),t.disconnect())}),n.on(Pe.Close,function(){t.disconnected||t._abort(q.SocketClosed,"Underlying socket is already closed.")}),n},r.prototype._initialize=function(t){this._id=t,this.socket.start(t,this._options.token)},r.prototype._handleMessage=function(t){var n,i,a=t.type,c=t.payload,l=t.src;switch(a){case Q.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Q.Error:this._abort(q.ServerError,c.msg);break;case Q.IdTaken:this._abort(q.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Q.InvalidKey:this._abort(q.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Q.Leave:P.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case Q.Expire:this.emitError(q.PeerUnavailable,"Could not connect to peer ".concat(l));break;case Q.Offer:var h=c.connectionId,v=this.getConnection(l,h);if(v&&(v.close(),P.default.warn("Offer received for existing Connection ID:".concat(h))),c.type===he.Media){var s=new vr.MediaConnection(l,this,{connectionId:h,_payload:c,metadata:c.metadata});v=s,this._addConnection(l,v),this.emit("call",s)}else if(c.type===he.Data){var o=new mr.DataConnection(l,this,{connectionId:h,_payload:c,metadata:c.metadata,label:c.label,serialization:c.serialization,reliable:c.reliable});v=o,this._addConnection(l,v),this.emit("connection",o)}else{P.default.warn("Received malformed connection type:".concat(c.type));return}var u=this._getMessages(h);try{for(var f=Ze(u),d=f.next();!d.done;d=f.next()){var p=d.value;v.handleMessage(p)}}catch(T){n={error:T}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}break;default:if(!c){P.default.warn("You received a malformed message from ".concat(l," of type ").concat(a));return}var h=c.connectionId,v=this.getConnection(l,h);v&&v.peerConnection?v.handleMessage(t):h?this._storeMessage(h,t):P.default.warn("You received an unrecognized message:",t);break}},r.prototype._storeMessage=function(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)},r.prototype._getMessages=function(t){var n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]},r.prototype.connect=function(t,n){if(n===void 0&&(n={}),this.disconnected){P.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(q.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new mr.DataConnection(t,this,n);return this._addConnection(t,i),i},r.prototype.call=function(t,n,i){if(i===void 0&&(i={}),this.disconnected){P.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(q.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){P.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var a=new vr.MediaConnection(t,this,st(st({},i),{_stream:n}));return this._addConnection(t,a),a},r.prototype._addConnection=function(t,n){P.default.log("add connection ".concat(n.type,":").concat(n.connectionId," to peerId:").concat(t)),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)},r.prototype._removeConnection=function(t){var n=this._connections.get(t.peer);if(n){var i=n.indexOf(t);i!==-1&&n.splice(i,1)}this._lostMessages.delete(t.connectionId)},r.prototype.getConnection=function(t,n){var i,a,c=this._connections.get(t);if(!c)return null;try{for(var l=Ze(c),s=l.next();!s.done;s=l.next()){var o=s.value;if(o.connectionId===n)return o}}catch(u){i={error:u}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return null},r.prototype._delayedAbort=function(t,n){var i=this;setTimeout(function(){i._abort(t,n)},0)},r.prototype._abort=function(t,n){P.default.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()},r.prototype.emitError=function(t,n){P.default.error("Error:",n);var i;typeof n=="string"?i=new Error(n):i=n,i.type=t,this.emit("error",i)},r.prototype.destroy=function(){this.destroyed||(P.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},r.prototype._cleanup=function(){var t,n;try{for(var i=Ze(this._connections.keys()),a=i.next();!a.done;a=i.next()){var c=a.value;this._cleanupPeer(c),this._connections.delete(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this.socket.removeAllListeners()},r.prototype._cleanupPeer=function(t){var n,i,a=this._connections.get(t);if(!!a)try{for(var c=Ze(a),l=c.next();!l.done;l=c.next()){var s=l.value;s.close()}}catch(o){n={error:o}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},r.prototype.disconnect=function(){if(!this.disconnected){var t=this.id;P.default.log("Disconnect peer with ID:".concat(t)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}},r.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)P.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)P.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},r.prototype.listAllPeers=function(t){var n=this;t===void 0&&(t=function(i){}),this._api.listAllPeers().then(function(i){return t(i)}).catch(function(i){return n._abort(q.ServerError,i)})},r.DEFAULT_KEY="peerjs",r}(vt.EventEmitter),Ms=Ki.Peer;const Is=[O("circle",{cx:"15",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[O("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"105",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var As=H({name:"QSpinnerDots",props:Xn,setup(e){const{cSize:r,classes:t}=Zn(e);return()=>O("svg",{class:t.value,fill:"currentColor",width:r.value,height:r.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Is)}});const{passive:Le}=Fe;var ws=H({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:r,emit:t}){const n=I(!1),i=I(!0),a=I(null);let c=e.initialIndex||0,l,s;const o=_(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function u(){if(e.disable===!0||n.value===!0||i.value===!1)return;const b=yt(l),y=Pt(l),D=Fr(l);e.reverse===!1?Math.round(y+D+e.offset)>=Math.round(b)&&f():Math.round(y)<=e.offset&&f()}function f(){if(e.disable===!0||n.value===!0||i.value===!1)return;c++,n.value=!0;const b=yt(l);t("load",c,y=>{i.value===!0&&(n.value=!1,Ge(()=>{if(e.reverse===!0){const D=yt(l),R=Pt(l),z=D-b;at(l,R+z)}y===!0?h():a.value&&a.value.closest("body")&&s()}))})}function d(){c=0}function p(){i.value===!1&&(i.value=!0,l.addEventListener("scroll",s,Le)),u()}function h(){i.value===!0&&(i.value=!1,n.value=!1,l.removeEventListener("scroll",s,Le),s!==void 0&&s.cancel!==void 0&&s.cancel())}function v(){if(l&&i.value===!0&&l.removeEventListener("scroll",s,Le),l=br(a.value,e.scrollTarget),i.value===!0){if(l.addEventListener("scroll",s,Le),e.reverse===!0){const b=yt(l),y=Fr(l);at(l,b-y)}u()}}function T(b){c=b}function g(b){b=parseInt(b,10);const y=s;s=b<=0?u:ri(u,isNaN(b)===!0?100:b),l&&i.value===!0&&(y!==void 0&&l.removeEventListener("scroll",y,Le),l.addEventListener("scroll",s,Le))}L(()=>e.disable,b=>{b===!0?h():p()}),L(()=>e.reverse,b=>{n.value===!1&&i.value===!0&&u()}),L(()=>e.scrollTarget,v),L(()=>e.debounce,g);let m=!1;ei(()=>{m!==!1&&l&&at(l,m)}),ti(()=>{m=l?Pt(l):!1}),ve(()=>{i.value===!0&&l.removeEventListener("scroll",s,Le)}),Ae(()=>{g(e.debounce),v()});const x=ae();return Object.assign(x.proxy,{poll:()=>{s!==void 0&&s()},trigger:f,stop:h,reset:d,resume:p,setIndex:T}),()=>{const b=yr(r.default,[]);return e.disable!==!0&&i.value===!0&&b[e.reverse===!1?"push":"unshift"](O("div",{class:o.value},we(r.loading))),O("div",{class:"q-infinite-scroll",ref:a},b)}}});const wn=["vertical","horizontal"],rr={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},jn={prevent:!0,mouse:!0,mouseAllDir:!0},Bn=e=>e>=250?50:Math.ceil(e/5);var ta=H({name:"QScrollArea",props:{...ft,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:r,emit:t}){const n=I(!1),i=I(!1),a=I(!1),c={vertical:I(0),horizontal:I(0)},l={vertical:{ref:I(null),position:I(0),size:I(0)},horizontal:{ref:I(null),position:I(0),size:I(0)}},{proxy:s}=ae(),o=dt(e,s.$q);let u,f;const d=I(null),p=_(()=>"q-scrollarea"+(o.value===!0?" q-scrollarea--dark":""));l.vertical.percentage=_(()=>{const k=l.vertical.size.value-c.vertical.value;if(k<=0)return 0;const j=Ie(l.vertical.position.value/k,0,1);return Math.round(j*1e4)/1e4}),l.vertical.thumbHidden=_(()=>(e.visible===null?a.value:e.visible)!==!0&&n.value===!1&&i.value===!1||l.vertical.size.value<=c.vertical.value+1),l.vertical.thumbStart=_(()=>l.vertical.percentage.value*(c.vertical.value-l.vertical.thumbSize.value)),l.vertical.thumbSize=_(()=>Math.round(Ie(c.vertical.value*c.vertical.value/l.vertical.size.value,Bn(c.vertical.value),c.vertical.value))),l.vertical.style=_(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${l.vertical.thumbStart.value}px`,height:`${l.vertical.thumbSize.value}px`})),l.vertical.thumbClass=_(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.vertical.barClass=_(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),l.horizontal.percentage=_(()=>{const k=l.horizontal.size.value-c.horizontal.value;if(k<=0)return 0;const j=Ie(l.horizontal.position.value/k,0,1);return Math.round(j*1e4)/1e4}),l.horizontal.thumbHidden=_(()=>(e.visible===null?a.value:e.visible)!==!0&&n.value===!1&&i.value===!1||l.horizontal.size.value<=c.horizontal.value+1),l.horizontal.thumbStart=_(()=>l.horizontal.percentage.value*(c.horizontal.value-l.horizontal.thumbSize.value)),l.horizontal.thumbSize=_(()=>Math.round(Ie(c.horizontal.value*c.horizontal.value/l.horizontal.size.value,Bn(c.horizontal.value),c.horizontal.value))),l.horizontal.style=_(()=>({...e.thumbStyle,...e.horizontalThumbStyle,left:`${l.horizontal.thumbStart.value}px`,width:`${l.horizontal.thumbSize.value}px`})),l.horizontal.thumbClass=_(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.horizontal.barClass=_(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const h=_(()=>l.vertical.thumbHidden.value===!0&&l.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),v=[[ot,k=>{R(k,"vertical")},void 0,{vertical:!0,...jn}]],T=[[ot,k=>{R(k,"horizontal")},void 0,{horizontal:!0,...jn}]];function g(){const k={};return wn.forEach(j=>{const B=l[j];k[j+"Position"]=B.position.value,k[j+"Percentage"]=B.percentage.value,k[j+"Size"]=B.size.value,k[j+"ContainerSize"]=c[j].value}),k}const m=ri(()=>{const k=g();k.ref=s,t("scroll",k)},0);function x(k,j,B){if(wn.includes(k)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(k==="vertical"?at:$r)(d.value,j,B)}function b({height:k,width:j}){let B=!1;c.vertical.value!==k&&(c.vertical.value=k,B=!0),c.horizontal.value!==j&&(c.horizontal.value=j,B=!0),B===!0&&V()}function y({position:k}){let j=!1;l.vertical.position.value!==k.top&&(l.vertical.position.value=k.top,j=!0),l.horizontal.position.value!==k.left&&(l.horizontal.position.value=k.left,j=!0),j===!0&&V()}function D({height:k,width:j}){l.horizontal.size.value!==j&&(l.horizontal.size.value=j,V()),l.vertical.size.value!==k&&(l.vertical.size.value=k,V())}function R(k,j){const B=l[j];if(k.isFirst===!0){if(B.thumbHidden.value===!0)return;f=B.position.value,i.value=!0}else if(i.value!==!0)return;k.isFinal===!0&&(i.value=!1);const U=rr[j],pe=c[j].value,be=(B.size.value-pe)/(pe-B.thumbSize.value),_e=k.distance[U.dist],me=f+(k.direction===U.dir?1:-1)*_e*be;oe(me,j)}function z(k,j){const B=l[j];if(B.thumbHidden.value!==!0){const U=k[rr[j].offset];if(U<B.thumbStart.value||U>B.thumbStart.value+B.thumbSize.value){const pe=U-B.thumbSize.value/2;oe(pe/c[j].value*B.size.value,j)}B.ref.value!==null&&B.ref.value.dispatchEvent(new MouseEvent(k.type,k))}}function N(k){z(k,"vertical")}function M(k){z(k,"horizontal")}function V(){n.value===!0?clearTimeout(u):n.value=!0,u=setTimeout(()=>{n.value=!1},e.delay),e.onScroll!==void 0&&m()}function oe(k,j){d.value[rr[j].scroll]=k}function Y(){a.value=!0}function G(){a.value=!1}let se=null;return ti(()=>{se={top:l.vertical.position.value,left:l.horizontal.position.value}}),ei(()=>{if(se===null)return;const k=d.value;k!==null&&($r(k,se.left),at(k,se.top))}),ve(m.cancel),Object.assign(s,{getScrollTarget:()=>d.value,getScroll:g,getScrollPosition:()=>({top:l.vertical.position.value,left:l.horizontal.position.value}),getScrollPercentage:()=>({top:l.vertical.percentage.value,left:l.horizontal.percentage.value}),setScrollPosition:x,setScrollPercentage(k,j,B){x(k,j*(l[k].size.value-c[k].value),B)}}),()=>O("div",{class:p.value,onMouseenter:Y,onMouseleave:G},[O("div",{ref:d,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[O("div",{class:"q-scrollarea__content absolute",style:h.value},Cr(r.default,[O(Ve,{debounce:0,onResize:D})])),O(ui,{axis:"both",onScroll:y})]),O(Ve,{debounce:0,onResize:b}),O("div",{class:l.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:N}),O("div",{class:l.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:M}),ar(O("div",{ref:l.vertical.ref,class:l.vertical.thumbClass.value,style:l.vertical.style.value,"aria-hidden":"true"}),v),ar(O("div",{ref:l.horizontal.ref,class:l.horizontal.thumbClass.value,style:l.horizontal.style.value,"aria-hidden":"true"}),T)])}});function Re(e,r,t){return parseInt(e.substr(r,t),16)}function ra(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function nr(e,r,t){return t=t<0?t+6:t>6?t-6:t,ra(255*(t<1?e+(r-e)*t:t<3?r:t<4?e+(r-e)*(4-t):e))}function js(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let r;const t=e.length;if(t<6){const n=e[1],i=e[2],a=e[3],c=e[4]||"";r="#"+n+n+i+i+a+a+c+c}return(t==7||t>8)&&(r=e),r}}function Ln(e){const r=Re(e,7,2);let t;if(isNaN(r))t=e;else{const n=Re(e,1,2),i=Re(e,3,2),a=Re(e,5,2);t="rgba("+n+","+i+","+a+","+(r/255).toFixed(2)+")"}return t}function Bs(e,r,t){let n;if(r==0){const i=ra(t*255);n=i+i+i}else{const i=t<=.5?t*(r+1):t+r-t*r,a=t*2-i;n=nr(a,i,e*6+2)+nr(a,i,e*6)+nr(a,i,e*6-2)}return"#"+n}function et(e,r,t){const n=[.55,.5,.5,.46,.6,.55,.55],i=n[e*6+.5|0];return t=t<.5?t*i*2:i+(t-.5)*(1-i)*2,Bs(e,r,t)}const Ls=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},zn={V:"jdenticon_config",n:"config"};var zs={};function Fs(e,r){const t=typeof e=="object"&&e||zs[zn.n]||Ls[zn.V]||{},n=t.lightness||{},i=t.saturation||{},a="color"in i?i.color:i,c=i.grayscale,l=t.backColor,s=t.padding;function o(f,d){let p=n[f];return p&&p.length>1||(p=d),function(h){return h=p[0]+h*(p[1]-p[0]),h<0?0:h>1?1:h}}function u(f){const d=t.hues;let p;return d&&d.length>0&&(p=d[0|.999*f*d.length]),typeof p=="number"?(p/360%1+1)%1:f}return{W:u,o:typeof a=="number"?a:.5,D:typeof c=="number"?c:0,p:o("color",[.4,.8]),F:o("grayscale",[.3,.9]),G:js(l),X:typeof e=="number"?e:typeof s=="number"?s:r}}class Ct{constructor(r,t){this.x=r,this.y=t}}class na{constructor(r,t,n,i){this.q=r,this.t=t,this.H=n,this.Y=i}I(r,t,n,i){const a=this.q+this.H,c=this.t+this.H,l=this.Y;return l===1?new Ct(a-t-(i||0),this.t+r):l===2?new Ct(a-r-(n||0),c-t-(i||0)):l===3?new Ct(this.q+t,c-r-(n||0)):new Ct(this.q+r,this.t+t)}}const $s=new na(0,0,0,0);class qs{constructor(r){this.J=r,this.u=$s}g(r,t){const n=t?-2:2,i=[];for(let a=t?r.length-2:0;a<r.length&&a>=0;a+=n)i.push(this.u.I(r[a],r[a+1]));this.J.g(i)}h(r,t,n,i){const a=this.u.I(r,t,n,n);this.J.h(a,n,i)}i(r,t,n,i,a){this.g([r,t,r+n,t,r+n,t+i,r,t+i],a)}j(r,t,n,i,a,c){const l=[r+n,t,r+n,t+i,r,t+i,r,t];l.splice((a||0)%4*2,2),this.g(l,c)}K(r,t,n,i,a){this.g([r+n/2,t,r+n,t+i/2,r+n/2,t+i,r,t+i/2],a)}}function Ns(e,r,t,n){e=e%14;let i,a,c,l,s,o;e?e==1?(c=0|t*.5,l=0|t*.8,r.j(t-c,0,c,l,2)):e==2?(c=0|t/3,r.i(c,c,t-c,t-c)):e==3?(s=t*.1,o=t<6?1:t<8?2:0|t*.25,s=s>1?0|s:s>.5?1:s,r.i(o,o,t-s-o,t-s-o)):e==4?(a=0|t*.15,c=0|t*.5,r.h(t-c-a,t-c-a,c)):e==5?(s=t*.1,o=s*4,o>3&&(o=0|o),r.i(0,0,t,t),r.g([o,o,t-s,o,o+(t-o-s)/2,t-s],!0)):e==6?r.g([0,0,t,0,t,t*.7,t*.4,t*.4,t*.7,t,0,t]):e==7?r.j(t/2,t/2,t/2,t/2,3):e==8?(r.i(0,0,t,t/2),r.i(0,t/2,t/2,t/2),r.j(t/2,t/2,t/2,t/2,1)):e==9?(s=t*.14,o=t<4?1:t<6?2:0|t*.35,s=t<8?s:0|s,r.i(0,0,t,t),r.i(o,o,t-o-s,t-o-s,!0)):e==10?(s=t*.12,o=s*3,r.i(0,0,t,t),r.h(o,o,t-s-o,!0)):e==11?r.j(t/2,t/2,t/2,t/2,3):e==12?(a=t*.25,r.i(0,0,t,t),r.K(a,a,t-a,t-a,!0)):!n&&(a=t*.4,c=t*1.2,r.h(a,a,c)):(i=t*.42,r.g([0,0,t,0,t,t-i*2,t-i,t,0,t]))}function Fn(e,r,t){e=e%4;let n;e?e==1?r.j(0,t/2,t,t/2,0):e==2?r.K(0,0,t,t):(n=t/6,r.h(n,n,t-2*n)):r.j(0,0,t,t,0)}function Us(e,r){return e=r.W(e),[et(e,r.D,r.F(0)),et(e,r.o,r.p(.5)),et(e,r.D,r.F(1)),et(e,r.o,r.p(1)),et(e,r.o,r.p(0))]}function Hs(e,r,t){const n=Fs(t,.08);n.G&&e.m(n.G);let i=e.k;const a=.5+i*n.X|0;i-=a*2;const c=new qs(e),l=0|i/4,s=0|a+i/2-l*2,o=0|a+i/2-l*2;function u(T,g,m,x,b){const y=Re(r,m,1);let D=x?Re(r,x,1):0;e.L(d[p[T]]);for(let R=0;R<b.length;R++)c.u=new na(s+b[R][0]*l,o+b[R][1]*l,l,D++%4),g(y,c,l,R);e.M()}const f=Re(r,-7)/268435455,d=Us(f,n),p=[];let h;function v(T){if(T.indexOf(h)>=0){for(let g=0;g<T.length;g++)if(p.indexOf(T[g])>=0)return!0}}for(let T=0;T<3;T++)h=Re(r,8+T,1)%d.length,(v([0,4])||v([2,3]))&&(h=1),p.push(h);u(0,Fn,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),u(1,Fn,4,5,[[0,0],[3,0],[3,3],[0,3]]),u(2,Ns,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function Gs(e){var n=0,i=0,a=encodeURI(e)+"%80",c=[],l,s=[],o=1732584193,u=4023233417,f=~o,d=~u,p=3285377520,h=[o,u,f,d,p],v=0,T="";function g(m,x){return m<<x|m>>>32-x}for(;n<a.length;i++)c[i>>2]=c[i>>2]|(a[n]=="%"?parseInt(a.substring(n+1,n+=3),16):a.charCodeAt(n++))<<(3-(i&3))*8;for(l=((i+7>>6)+1)*16,c[l-1]=i*8-8;v<l;v+=16){for(n=0;n<80;n++)i=g(o,5)+p+(n<20?(u&f^~u&d)+1518500249:n<40?(u^f^d)+1859775393:n<60?(u&f^u&d^f&d)+2400959708:(u^f^d)+3395469782)+(s[n]=n<16?c[v+n]|0:g(s[n-3]^s[n-8]^s[n-14]^s[n-16],1)),p=d,d=f,f=g(u,30),u=o,o=i;h[0]=o=h[0]+o|0,h[1]=u=h[1]+u|0,h[2]=f=h[2]+f|0,h[3]=d=h[3]+d|0,h[4]=p=h[4]+p|0}for(n=0;n<40;n++)T+=(h[n>>3]>>>(7-(n&7))*4&15).toString(16);return T}function $n(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function qn(e){return Gs(e==null?"":""+e)}class Vs{constructor(r,t){const n=r.canvas,i=n.width,a=n.height;r.save(),t||(t=Math.min(i,a),r.translate((i-t)/2|0,(a-t)/2|0)),this.l=r,this.k=t,r.clearRect(0,0,t,t)}m(r){const t=this.l,n=this.k;t.fillStyle=Ln(r),t.fillRect(0,0,n,n)}L(r){const t=this.l;t.fillStyle=Ln(r),t.beginPath()}M(){this.l.fill()}g(r){const t=this.l;t.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;n++)t.lineTo(r[n].x,r[n].y);t.closePath()}h(r,t,n){const i=this.l,a=t/2;i.moveTo(r.x+a,r.y+a),i.arc(r.x+a,r.y+a,a,0,Math.PI*2,n),i.closePath()}finish(){this.l.restore()}}function qe(e){return(e*10+.5|0)/10}class Ws{constructor(){this.v=""}g(r){let t="";for(let n=0;n<r.length;n++)t+=(n?"L":"M")+qe(r[n].x)+" "+qe(r[n].y);this.v+=t+"Z"}h(r,t,n){const i=n?0:1,a=qe(t/2),c=qe(t),l="a"+a+","+a+" 0 1,"+i+" ";this.v+="M"+qe(r.x)+" "+qe(r.y+t/2)+l+c+",0"+l+-c+",0"}}class Qs{constructor(r){this.A,this.B={},this.N=r,this.k=r.k}m(r){const t=/^(#......)(..)?/.exec(r),n=t[2]?Re(t[2],0)/255:1;this.N.m(t[1],n)}L(r){this.A=this.B[r]||(this.B[r]=new Ws)}M(){}g(r){this.A.g(r)}h(r,t,n){this.A.h(r,t,n)}finish(){const r=this.B;for(let t in r)r.hasOwnProperty(t)&&this.N.O(t,r[t].v)}}const it={P:"http://www.w3.org/2000/svg",R:"width",S:"height"},ia=1,Js=2,ir={Z:"data-jdenticon-hash",T:"data-jdenticon-value"},Nn=typeof document<"u"&&document.querySelectorAll.bind(document);function Ks(e){if(e){const r=e.tagName;if(/^svg$/i.test(r))return ia;if(/^canvas$/i.test(r)&&"getContext"in e)return Js}}function Un(e,r,...t){const n=document.createElementNS(it.P,r);for(let i=0;i+1<t.length;i+=2)n.setAttribute(t[i],t[i+1]);e.appendChild(n)}class Ys{constructor(r){const t=this.k=Math.min(Number(r.getAttribute(it.R))||100,Number(r.getAttribute(it.S))||100);for(this.U=r;r.firstChild;)r.removeChild(r.firstChild);r.setAttribute("viewBox","0 0 "+t+" "+t),r.setAttribute("preserveAspectRatio","xMidYMid meet")}m(r,t){t&&Un(this.U,"rect",it.R,"100%",it.S,"100%","fill",r,"opacity",t)}O(r,t){Un(this.U,"path","fill",r,"d",t)}}function Xs(e,r,t){aa(e,r,t,function(n,i){if(i)return i==ia?new Qs(new Ys(n)):new Vs(n.getContext("2d"))})}function aa(e,r,t,n){if(typeof e=="string"){if(Nn){const c=Nn(e);for(let l=0;l<c.length;l++)aa(c[l],r,t,n)}return}const i=$n(r)||r!=null&&qn(r)||$n(e.getAttribute(ir.Z))||e.hasAttribute(ir.T)&&qn(e.getAttribute(ir.T));if(!i)return;const a=n(e,Ks(e));a&&Hs(a,i,t)}const Ir=We({__name:"JdentIcon",props:{hash:null},setup(e){const r=e,t=I();return Ae(()=>Xs(t.value,r.hash)),(n,i)=>(ee(),He("svg",{class:"jdent-icon",ref_key:"svgRef",ref:t},null,512))}});let Tt;const Zs=new Uint8Array(16);function ec(){if(!Tt&&(Tt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tt(Zs)}const W=[];for(let e=0;e<256;++e)W.push((e+256).toString(16).slice(1));function tc(e,r=0){return(W[e[r+0]]+W[e[r+1]]+W[e[r+2]]+W[e[r+3]]+"-"+W[e[r+4]]+W[e[r+5]]+"-"+W[e[r+6]]+W[e[r+7]]+"-"+W[e[r+8]]+W[e[r+9]]+"-"+W[e[r+10]]+W[e[r+11]]+W[e[r+12]]+W[e[r+13]]+W[e[r+14]]+W[e[r+15]]).toLowerCase()}const rc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Hn={randomUUID:rc};function nc(e,r,t){if(Hn.randomUUID&&!r&&!e)return Hn.randomUUID();e=e||{};const n=e.random||(e.rng||ec)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let i=0;i<16;++i)r[t+i]=n[i];return r}return tc(n)}const ic=()=>!0;function ac(e){const r={};return e.forEach(t=>{r[t]=ic}),r}function Ut(){const{emit:e,proxy:r}=ae(),t=I(null);function n(){t.value.show()}function i(){t.value.hide()}function a(l){e("ok",l),i()}function c(){e("hide")}return Object.assign(r,{show:n,hide:i}),{dialogRef:t,onDialogHide:c,onDialogOK:a,onDialogCancel:i}}const oa=["ok","hide"];Ut.emits=oa;Ut.emitsObject=ac(oa);const sa=e=>($a("data-v-b3944da2"),e=e(),qa(),e),oc=sa(()=>ct("div",{class:"text-h6"},"Chose your avatar",-1)),sc=sa(()=>ct("div",{class:"text-caption"}," Your avatar is coupled to your peer ID so it cannot be changed without reseting your friend's list. ",-1)),cc={class:"icon-flex-container"},lc={class:"row justify-center q-my-md"},uc=We({__name:"AvatarPicker",emits:{...Ut.emitsObject},setup(e){const{dialogRef:r,onDialogOK:t,onDialogHide:n}=Ut(),i=I(a(24));function a(l){return[...Array(l)].map(()=>nc())}const c=(l,s)=>{i.value.push(...a(12)),s()};return(l,s)=>(ee(),xe(za,{ref_key:"dialogRef",ref:r,onHide:ke(n)},{default:E(()=>[C(Fa,{style:{width:"700px","max-width":"650px","max-height":"90vh"}},{default:E(()=>[C(qr,null,{default:E(()=>[oc,sc]),_:1}),C(qr,null,{default:E(()=>[C(ta,{style:{height:"300px"},visible:""},{default:E(()=>[C(ws,{offset:750,onLoad:c},{loading:E(()=>[ct("div",lc,[C(As,{color:"primary",size:"40px"})])]),default:E(()=>[ct("div",cc,[(ee(!0),He(ii,null,ni(i.value,o=>(ee(),xe(Ir,{hash:o,key:o,onClick:u=>ke(t)(o)},null,8,["hash","onClick"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}});var fc=Tr(uc,[["__scopeId","data-v-b3944da2"]]);const Ht=vi("id",null);Ht.value??=await dc();const Ar=I(!0),ca=I(!1),ut=I(new Ms(Ht.value,{debug:0}));ut.value.on("open",()=>{Ar.value=!1,ca.value=!0});ut.value.on("disconnected",()=>{Ar.value=!0,ca.value=!1,ut.value.reconnect()});async function dc(){return await new Promise(e=>{Na.create({component:fc,componentProps:{persistent:!0}}).onOk(r=>{e(r)})})}class la{constructor(r){this.id=r,this.connection=ut.value.connect(r)}highlight=!1;connection;remove(){const r=$e.value.findIndex(t=>t.id===this.id);wr.value.delete(this.id),$e.value.splice(r,1)}}function pc(e){const r=$e.value.find(t=>t.id===e);if(r){r.highlight=!0,setTimeout(()=>r.highlight=!1,150);return}wr.value.add(e),$e.value.push(new la(e))}const wr=vi("friend-list",new Set,{serializer:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify([...e])}}),$e=I([]);$e.value=[...wr.value].map(e=>new la(e));ut.value.on("connection",e=>{const r=$e.value.find(t=>t.id===e.peer);!r||(r.connection=e)});const hc=We({__name:"AddFriendInput",setup(e){const r=I("");function t(n){var c;const a=(c=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.exec(n))==null?void 0:c[0];a&&setTimeout(()=>{pc(a),r.value=""},0)}return(n,i)=>(ee(),xe(ai,{rounded:"",outlined:"",dense:"",class:"WAL__field full-width",modelValue:r.value,"onUpdate:modelValue":[i[0]||(i[0]=a=>r.value=a),i[1]||(i[1]=a=>t(a))],placeholder:"Paste your friend's peer ID"},{prepend:E(()=>[C(wt,{name:"person_add",class:"q-mr-xs"})]),_:1},8,["modelValue"]))}});var ua=H({name:"QAvatar",props:{...Ua,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:r}){const t=Ha(e),n=_(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),i=_(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const a=e.icon!==void 0?[O(wt,{name:e.icon})]:void 0;return O("div",{class:n.value,style:t.value},[O("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},Ga(r.default,a))])}}}),Gn=H({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:r}){const t=_(()=>parseInt(e.lines,10)),n=_(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(t.value===1?" ellipsis":"")),i=_(()=>e.lines!==void 0&&t.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":t.value}:null);return()=>O("div",{style:i.value,class:n.value},we(r.default))}});const vc={key:0,class:"text-positive"},mc={key:1,class:"text-grey"},gc=We({__name:"FriendList",setup(e){const r=_(()=>[...$e.value].reverse());return(t,n)=>(ee(),xe(ta,{style:{height:"calc(100% - 100px)"}},{default:E(()=>[C(jt,null,{default:E(()=>[C(Va,{"enter-active-class":"animated lightSpeedInRight","leave-active-class":"animated lightSpeedOutRight"},{default:E(()=>[(ee(!0),He(ii,null,ni(ke(r),i=>(ee(),xe(fe,{key:i.id,class:Wa({"animated pulse highlight":i.highlight})},{default:E(()=>[C(ie,{avatar:""},{default:E(()=>[C(ua,null,{default:E(()=>[C(Ir,{hash:i.id},null,8,["hash"])]),_:2},1024)]),_:2},1024),C(ie,null,{default:E(()=>[C(Gn,{lines:"1",style:{"text-overflow":"ellipsis",width:"5em"}},{default:E(()=>[ce(Nr(i.id),1)]),_:2},1024),C(Gn,{class:"conversation__summary",caption:""},{default:E(()=>[i.connection.open?(ee(),He("span",vc,[C(wt,{name:"check",color:"positive"}),ce(" Connected ")])):(ee(),He("span",mc," Not connected "))]),_:2},1024)]),_:2},1024),C(ie,{side:""},{default:E(()=>[C(wt,{name:"keyboard_arrow_down",style:{cursor:"pointer"}}),C(kr,{"auto-close":"",offset:[-18,-8]},{default:E(()=>[C(jt,{style:{"min-width":"150px"}},{default:E(()=>[C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Edit Name")]),_:1})]),_:1}),C(fe,{clickable:"",onClick:a=>t.$navigator.clipboard.writeText(i.id)},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Copy peer ID")]),_:1})]),_:2},1032,["onClick"]),C(Qa,{class:"q-my-xs"}),C(fe,{clickable:""},{default:E(()=>[C(ie,{onClick:a=>i.remove()},{default:E(()=>[ce("Remove")]),_:2},1032,["onClick"])]),_:2},1024),C(fe,null,{default:E(()=>[C(ie,null,{default:E(()=>{var a;return[ce(Nr((a=i.connection)==null?void 0:a.connectionId),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1}))}});var yc=Tr(gc,[["__scopeId","data-v-666c24bb"]]);const bc=[O("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[O("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),O("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var _c=H({name:"QSpinnerOval",props:Xn,setup(e){const{cSize:r,classes:t}=Zn(e);return()=>O("svg",{class:t.value,stroke:"currentColor",width:r.value,height:r.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},bc)}}),Sc=H({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:r,emit:t}){const{proxy:{$q:n}}=ae(),i=Gt(pt,de);if(i===de)return console.error("QHeader needs to be child of QLayout"),de;const a=I(parseInt(e.heightHint,10)),c=I(!0),l=_(()=>e.reveal===!0||i.view.value.indexOf("H")>-1||n.platform.is.ios&&i.isContainer.value===!0),s=_(()=>{if(e.modelValue!==!0)return 0;if(l.value===!0)return c.value===!0?a.value:0;const m=a.value-i.scroll.value.position;return m>0?m:0}),o=_(()=>e.modelValue!==!0||l.value===!0&&c.value!==!0),u=_(()=>e.modelValue===!0&&o.value===!0&&e.reveal===!0),f=_(()=>"q-header q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(o.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),d=_(()=>{const m=i.rows.value.top,x={};return m[0]==="l"&&i.left.space===!0&&(x[n.lang.rtl===!0?"right":"left"]=`${i.left.size}px`),m[2]==="r"&&i.right.space===!0&&(x[n.lang.rtl===!0?"left":"right"]=`${i.right.size}px`),x});function p(m,x){i.update("header",m,x)}function h(m,x){m.value!==x&&(m.value=x)}function v({height:m}){h(a,m),p("size",m)}function T(m){u.value===!0&&h(c,!0),t("focusin",m)}L(()=>e.modelValue,m=>{p("space",m),h(c,!0),i.animate()}),L(s,m=>{p("offset",m)}),L(()=>e.reveal,m=>{m===!1&&h(c,e.modelValue)}),L(c,m=>{i.animate(),t("reveal",m)}),L(i.scroll,m=>{e.reveal===!0&&h(c,m.direction==="up"||m.position<=e.revealOffset||m.position-m.inflectionPoint<100)});const g={};return i.instances.header=g,e.modelValue===!0&&p("size",a.value),p("space",e.modelValue),p("offset",s.value),ve(()=>{i.instances.header===g&&(i.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const m=yr(r.default,[]);return e.elevated===!0&&m.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),m.push(O(Ve,{debounce:0,onResize:v})),O("header",{class:f.value,style:d.value,onFocusin:T},m)}}});const Cc=We({__name:"MeHeader",emits:["toggle-left-drawer"],setup(e){const r=Po(Ar,500);function t(){navigator.clipboard.writeText(Ht.value)}return(n,i)=>(ee(),xe(Sc,{elevated:""},{default:E(()=>[C(Rt,null,{default:E(()=>[C(Te,{round:"",flat:"",icon:"keyboard_arrow_left",class:"WAL__drawer-open q-mr-sm",onClick:i[0]||(i[0]=a=>n.$emit("toggle-left-drawer"))}),ke(Ur)?(ee(),xe(Te,{key:1,flat:"",label:"Stop Screenshare",icon:"stop_screen_share",class:"text-grey-4",onClick:i[1]||(i[1]=a=>Ur.value=void 0)})):(ee(),xe(Te,{key:0,flat:"",label:"Start Screenshare",icon:"screen_share",class:"text-grey-4",onClick:ke(Za)},null,8,["onClick"])),C(oi),C(Te,{round:"",flat:""},{default:E(()=>[C(ua,null,{default:E(()=>[C(Ir,{hash:ke(Ht)},null,8,["hash"])]),_:1}),ke(r)?(ee(),xe(_c,{key:0,size:"2em",style:{position:"absolute",opacity:"0.5"}})):Ja("",!0),C(kr,{"auto-close":"",offset:[110,0]},{default:E(()=>[C(jt,{style:{"min-width":"150px"}},{default:E(()=>[C(fe,{clickable:"",onClick:t},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Copy own peer ID")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var Tc=Tr(Cc,[["__scopeId","data-v-0535db96"]]);const kc=ct("div",{class:"text-h6",style:{"font-family":"sans-serif","user-select":"none"}}," W\u039BVE ",-1),Oc=We({__name:"MainLayout",setup(e){const r=Ya(),t=I(!1),n=I(""),i=_(()=>({height:r.screen.height+"px"}));function a(){t.value=!t.value}return(c,l)=>{const s=Xa("router-view");return ee(),He("div",{class:"WAL position-relative",style:Ka(ke(i))},[C(yo,{view:"lHh Lpr lFf",class:"WAL__layout shadow-3",container:""},{default:E(()=>[C(Tc,{onToggleLeftDrawer:a,class:"bg-dark-alt-2"}),C(po,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value=o),"show-if-above":"",breakpoint:690},{default:E(()=>[C(Rt,null,{default:E(()=>[kc,C(oi),C(Te,{round:"",flat:"",icon:"message"}),C(Te,{round:"",flat:"",icon:"more_vert"},{default:E(()=>[C(kr,{"auto-close":"",offset:[110,8]},{default:E(()=>[C(jt,{style:{"min-width":"150px"}},{default:E(()=>[C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("New group")]),_:1})]),_:1}),C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Profile")]),_:1})]),_:1}),C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Archived")]),_:1})]),_:1}),C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Favorites")]),_:1})]),_:1}),C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Settings")]),_:1})]),_:1}),C(fe,{clickable:""},{default:E(()=>[C(ie,null,{default:E(()=>[ce("Logout")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),C(Te,{round:"",flat:"",icon:"close",class:"WAL__drawer-close",onClick:a})]),_:1}),C(Rt,null,{default:E(()=>[C(hc)]),_:1}),C(yc)]),_:1},8,["modelValue"]),C(ho,{class:"dark-transparent"},{default:E(()=>[C(s)]),_:1}),C(mo,null,{default:E(()=>[C(Rt,{class:"row bg-dark-alt"},{default:E(()=>[C(Te,{round:"",flat:"",icon:"insert_emoticon",class:"q-mr-sm"}),C(ai,{rounded:"",outlined:"",dense:"",class:"WAL__field col-grow q-mr-sm",modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value=o),placeholder:"Type a message"},null,8,["modelValue"]),C(Te,{round:"",flat:"",icon:"mic"})]),_:1})]),_:1})]),_:1})],4)}}});export{Oc as default};
